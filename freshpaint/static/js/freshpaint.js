
// Portions of this code are licensed under the Apache License Version 2.0. A
// copy of the License can be obtained at:
// https://www.apache.org/licenses/LICENSE-2.0
(function() {
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(da){var aa=0;return function(){return aa<da.length?{done:!1,value:da[aa++]}:{done:!0}}};$jscomp.arrayIterator=function(da){return{next:$jscomp.arrayIteratorImpl(da)}};$jscomp.makeIterator=function(da){var aa="undefined"!=typeof Symbol&&Symbol.iterator&&da[Symbol.iterator];return aa?aa.call(da):$jscomp.arrayIterator(da)};
(function(){function da(a,b){return b={exports:{}},a(b,b.exports),b.exports}function aa(a,b,c,d){this.id=b;this.name=a;this.keys=c||{};this.originalEngine=this.engine=d||Tb}function ia(){this.tasks={};this.nextId=1}function R(a){return R.enabled(a)?function(b){b instanceof Error&&(b=b.stack||b.message);var c=new Date,d=c-(R[a]||c);R[a]=c;b=a+" "+b+" +"+R.humanize(d);window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function Va(a,b){return function(){return a.apply(b,
arguments)}}function ba(a,b,c){"function"===typeof b&&(c=b);this.name=a;this.id=rb();this.fn=c;this.maxItems=b.maxItems||Infinity;this.maxAttempts=b.maxAttempts||Infinity;this.backoff={MIN_RETRY_DELAY:b.minRetryDelay||1E3,MAX_RETRY_DELAY:b.maxRetryDelay||3E4,FACTOR:b.backoffFactor||2,JITTER:b.backoffJitter||0};this.timeouts={ACK_TIMER:1E3,RECLAIM_TIMER:3E3,RECLAIM_TIMEOUT:1E4,RECLAIM_WAIT:500};this.keys={IN_PROGRESS:"inProgress",QUEUE:"queue",RECLAIM_START:"reclaimStart",RECLAIM_END:"reclaimEnd",
ACK:"ack"};this._schedule=new Ub;this._processId=0;this._store=new Wa(this.name,this.id,this.keys);this._store.set(this.keys.IN_PROGRESS,{});this._store.set(this.keys.QUEUE,[]);this._ack=Va(this._ack,this);this._checkReclaim=Va(this._checkReclaim,this);this._processHead=Va(this._processHead,this);this._running=!1}function Ja(a){switch(typeof a.className){case "string":return a.className;case "object":return a.className.baseVal||a.getAttribute("class")||"";default:return""}}function Vb(a){var b="";
Ba(a)&&a.childNodes&&a.childNodes.length&&e.each(a.childNodes,function(c){c&&3===c.nodeType&&c.textContent&&(b+=e.trim(c.textContent).split(/(\s+)/).filter(Ca).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255))});return e.trim(b)}function Wb(a){return Xb(a).map(function(b){return b.textContent.trim()}).filter(Ca).join(" ").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Xb(a,b){b=void 0===b?10:b;var c=null,d=[];if(Ba(a)&&a.childNodes&&a.childNodes.length)for(a=
[[a,0]];a.length;){var f=$jscomp.makeIterator(a.pop()),g=f.next().value;f=f.next().value;if(!(f>b)&&null!==g)for(var h=0;h<g.childNodes.length;h++){var l=g.childNodes[h],p=l.nodeType;if((1===p||9===p||11===p)&&Ba(l))a.push([l,f+1]);else if(l.nodeType===window.Node.TEXT_NODE&&l.textContent.trim()){if(!c)c=l;else if(c.parentNode!==l.parentNode)return[];d.push(l)}}}return d}function Yb(a){return a&&11===a.nodeType}function qa(a,b){return a&&a.tagName&&a.tagName.toLowerCase()===b.toLowerCase()}function Zb(a,
b){if(!a||qa(a,"html")||!a||1!==a.nodeType)return!1;switch(a.tagName.toLowerCase()){case "html":return!1;case "form":return"submit"===b.type;case "input":return-1===["button","submit"].indexOf(a.getAttribute("type"))?"change"===b.type:"click"===b.type;case "select":case "textarea":return"change"===b.type;default:return"click"===b.type}}function $b(a){for(var b=[a];a.parentNode&&!qa(a,"body")&&!Yb(a.parentNode);)b.push(a.parentNode),a=a.parentNode;return b}function Ba(a){return!sb(a)||qa(a,"input")||
qa(a,"select")||qa(a,"textarea")||"true"===a.getAttribute("contenteditable")?!1:!0}function sb(a){for(var b=a;b.parentNode&&!qa(b,"body");b=b.parentNode){var c=Ja(b).split(" ");if(e.includes(c,"fp-sensitive")||e.includes(c,"fp-no-track"))return!1}if(e.includes(Ja(a).split(" "),"fp-include"))return!0;b=a.type||"";if("string"===typeof b)switch(b.toLowerCase()){case "hidden":return!1;case "password":return!1}a=a.name||a.id||"";return"string"===typeof a&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(a.replace(/[^a-zA-Z0-9]/g,
""))?!1:!0}function Ca(a){return null===a||e.isUndefined(a)||"string"===typeof a&&(a=e.trim(a),/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((a||"").replace(/[\- ]/g,""))||/(^\d{3}-?\d{2}-?\d{4}$)/.test(a))?!1:!0}function ac(a,b){tb(!0,a,b)}function bc(a,b){tb(!1,a,b)}function cc(a,b){return"1"===ub(a,b)}function vb(a,b){return"0"===ub(a,b)}function ua(a){return wb(a,function(b){return this._get_config(b)})}
function dc(a,b){b=b||{};Xa(b).remove(Ya(a,b),!!b.crossSubdomainCookie)}function Xa(a){a=a||{};return"localStorage"===a.persistenceType?e.localStorage:e.cookie}function Ya(a,b){b=b||{};return(b.persistencePrefix||"__mp_opt_in_out_")+a}function ub(a,b){return Xa(b).get(Ya(a,b))}function tb(a,b,c){e.isString(b)&&b.length?(c=c||{},Xa(c).set(Ya(b,c),a?1:0,e.isNumber(c.cookieExpiration)?c.cookieExpiration:null,!!c.crossSubdomainCookie,!!c.secureCookie),c.track&&a&&c.track(c.trackEventName||"$opt_in",c.trackProperties)):
console.error("gdpr."+(a?"optIn":"optOut")+" called with an invalid token")}function wb(a,b){return function(){var c=!1;try{var d=b.call(this,"token"),f=b.call(this,"opt_out_tracking_persistence_type"),g=b.call(this,"opt_out_tracking_cookie_prefix"),h=b.call(this,"window");d&&(c=vb(d,{persistenceType:f,persistencePrefix:g,window:h}))}catch(l){console.error("Unexpected error when checking tracking opt-out status: "+l)}if(!c)return a.apply(this,arguments);c=arguments[arguments.length-1];"function"===
typeof c&&c(0)}}function ec(a){this.priority=a.priority;this.targetValue=a.targetValue;this.operation=a.operation;this.operandValue=a.operandValue}function fc(a){this.destinationName=a.destinationName;this.eventDefId=a.eventDefId;this.priority=a.priority;var b=this.transformations=[];e.each(a.transformations,function(c){b.push(new ec(c))})}function Da(a,b){this.transformation=a;this.set=b}function gc(a,b){if(b===Za.String){if(null===a)throw Error("Cant cast null to string");if("object"===typeof a)return JSON.stringify(a);
if("string"===typeof a)return a;if("number"===typeof a)return a.toString();if("boolean"===typeof a)return a?"true":"false"}else if(b===Za.Number){if("object"===typeof a)throw Error("Cant cast object to number");if("string"===typeof a)return parseFloat(a)||a;if("number"===typeof a)return a;if("boolean"===typeof a)throw Error("Cant cast boolean to number");}else if(b===Za.Boolean){if("object"===typeof a)throw Error("Cant cast object to boolean");if("string"===typeof a)return b=a.toLowerCase(),"t"===
b||"true"===b?!0:"f"===b||"false"===b?!1:a;if("number"===typeof a)return 0!==a;if("boolean"===typeof a)return a}else throw Error("Got unexpected target type of cast transformation: "+b);}function V(a){this.transformers=e.sortBy(e.sortBy(a,function(b){return b.transformation.priority}),function(b){return b.set.priority})}function hc(a){return a.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function xb(a){if("and"===a.type){for(var b=[],c=0;c<a.filters.length;c++)b.push(xb(a.filters[c]));return new $a(b)}return"prop_filter"===
a.type?new ab(a.prop,a.op,a.val,a.negate||!1):new $a([])}function ic(a,b,c){if(!window.XMLHttpRequest)return c({eventDefs:[],destInfo:[],transformer:V.nil,configVersion:0});try{var d=new XMLHttpRequest;d.open("GET",a.config_url||a.app_host+"/event-definitions/"+b,!0);d.onreadystatechange=function(){if(4===d.readyState)if(200===d.status){if(c)try{var f=JSON.parse(d.responseText),g=[],h={},l=f.dest_info,p={},u=V.nil,v=f.version||1,m={},q={},F=!0,D="GET";2<=v&&(u=V.fromTransformationSets(f.transformation_sets));
for(var O=0;O<l.length;O++){var x=l[O];if(3<=v)if(x.useTransformer=!0,x.skipTransformingEventNames=!1,"Twitter Ads"===x.name&&(x.mapping=u.getLegacyMapping(x.id),x.settings.events=u.getLegacyMappingToSelf(x.id)),"AdRoll"===x.name)x.mapping=u.getLegacyMapping(x.id),x.useTransformer=!1,x.settings.events=u.getLegacyMappingToSelf(x.id);else if("Google AdWords New"===x.name){for(var ca=0;ca<f.event_defs.length;ca++){var S=f.event_defs[ca];h[S.id]=S.name}x.mapping=u.getLegacyMapping(x.name);x.skipTransformingEventNames=
!0;ca=[];for(var Ea=0;Ea<x.mapping.length;Ea++){var ja=x.mapping[Ea];ca.push({event:h[ja.fpEvent],id:ja.destEvent})}x.settings.clickConversions=ca}p[x.id]=x}for(h=0;h<f.event_defs.length;h++){var ka=f.event_defs[h];O=p;x={All:!1};var X=e.keys(ka.enabled_client_destinations);for(ja=0;ja<X.length;ja++){var ra=O[X[ja]];if(ra){var Z=ra.name;Z&&(x[Z]=!0)}}S=new yb(ka.name,ka.id,xb(ka.filter),x,ka.snapshots||[],ka.segment_compatible||!1);g.push(S)}m={"data-wa-link":!0,"data-ref":!0,"data-test-id":!0,"data-testid":!0,
"data-automation":!0,"data-qa":!0,"data-component":!0,"data-category":!0,"data-index":!0,"data-tid":!0,"data-selector":!0,"data-test":!0,"data-auid":!0,"data-hook":!0,"data-track":!0,"data-page":!0,"data-current-page":!0,"data-key":!0,"data-e2e":!0,"data-auto":!0,"data-element":!0,"data-source-file":!0,"aria-label":!0,"aria-labelledby":!0,"aria-describedby":!0,name:!0,role:!0,src:!0,href:!0,alt:!0,action:!0};if(4<=v&&f.elementAttributesWhitelist)for(S=0;S<f.elementAttributesWhitelist;S++)m[f.elementAttributesWhitelist[S]]=
!0;5<=v&&f.codeEvalConfig&&"object"===typeof f.codeEvalConfig&&(q=e.extend({onPageLoad:null,onPageChange:null,beforeEventFire:null},f.codeEvalConfig));6<=v&&(F=!!f.attemptRetry);7<=v&&(D=f.trackRequestType);c({eventDefs:g,destInfo:l,transformer:u,configVersion:v,elementAttributesWhitelist:m,codeEvalConfig:q,allowRetry:F,trackRequestType:D})}catch(ea){console.error(ea),c({eventDefs:[],destInfo:[],transformer:V.nil,configVersion:0})}}else 404===d.status?console.error("The above 404 is expected. It appears you have not setup your Freshpaint account yet."):
console.error("Bad HTTP status: "+d.status+" "+d.statusText),c({eventDefs:[],destInfo:[],transformer:V.nil,configVersion:0})};d.send(null)}catch(f){console.error(f)}}function jc(){if("undefined"!==typeof window){var a=window.Element.prototype;"function"!==typeof a.matches&&(a.matches=a.msMatchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||function(b){b=(this.document||this.ownerDocument).querySelectorAll(b);for(var c=0;b[c]&&b[c]!==this;)++c;return!!b[c]});"function"!==typeof a.closest&&
(a.closest=function(b){for(var c=this;c&&1===c.nodeType;){if(c.matches(b))return c;c=c.parentNode}return null})}}function va(a){return"freshpaint"===a||"perfalytics"===a}function zb(a,b){if("4b82b11f-7d2b-42d9-93ea-4dff599ad2b1"!==a||"/"===I.location.pathname||"Thumbtack Help"!==J.title)return b();setTimeout(function(){zb(a,b)},100)}for(var bb="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ab=da(function(a){var b=
"undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(b){var c=new Uint8Array(16);a.exports=function(){b(c);return c}}else{var d=Array(16);a.exports=function(){for(var f=0,g;16>f;f++)0===(f&3)&&(g=4294967296*Math.random()),d[f]=g>>>((f&3)<<3)&255;return d}}}),U=[],Ka=0;256>Ka;++Ka)U[Ka]=(Ka+256).toString(16).substr(1);var Bb=function(a,b){b=
b||0;return[U[a[b++]],U[a[b++]],U[a[b++]],U[a[b++]],"-",U[a[b++]],U[a[b++]],"-",U[a[b++]],U[a[b++]],"-",U[a[b++]],U[a[b++]],"-",U[a[b++]],U[a[b++]],U[a[b++]],U[a[b++]],U[a[b++]],U[a[b++]]].join("")},Cb,cb,db=0,eb=0,Fa=function(a,b,c){c=b&&c||0;"string"==typeof a&&(b="binary"===a?Array(16):null,a=null);a=a||{};a=a.random||(a.rng||Ab)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(b)for(var d=0;16>d;++d)b[c+d]=a[d];return b||Bb(a)};Fa.v1=function(a,b,c){c=b&&c||0;var d=b||[];a=a||{};var f=a.node||Cb,g=void 0!==
a.clockseq?a.clockseq:cb;if(null==f||null==g){var h=Ab();null==f&&(f=Cb=[h[0]|1,h[1],h[2],h[3],h[4],h[5]]);null==g&&(g=cb=(h[6]<<8|h[7])&16383)}h=void 0!==a.msecs?a.msecs:(new Date).getTime();var l=void 0!==a.nsecs?a.nsecs:eb+1,p=h-db+(l-eb)/1E4;0>p&&void 0===a.clockseq&&(g=g+1&16383);(0>p||h>db)&&void 0===a.nsecs&&(l=0);if(1E4<=l)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");db=h;eb=l;cb=g;h+=122192928E5;a=(1E4*(h&268435455)+l)%4294967296;d[c++]=a>>>24&255;d[c++]=a>>>16&255;d[c++]=
a>>>8&255;d[c++]=a&255;a=h/4294967296*1E4&268435455;d[c++]=a>>>8&255;d[c++]=a&255;d[c++]=a>>>24&15|16;d[c++]=a>>>16&255;d[c++]=g>>>8|128;d[c++]=g&255;for(g=0;6>g;++g)d[c+g]=f[g];return b?b:Bb(d)};Fa.v4=Fa;var kc=Object.prototype.hasOwnProperty,lc=String.prototype.charAt,mc=Object.prototype.toString,nc=function(a,b){return lc.call(a,b)},fb=function(a,b){return kc.call(a,b)},Db=function(a,b){b=b||fb;for(var c=[],d=0,f=a.length;d<f;d+=1)b(a,d)&&c.push(String(d));return c},Ga=function(a){if(null==a)return[];
if("[object String]"===mc.call(a))return Db(a,nc);if(null!=a&&"function"!==typeof a&&"number"===typeof a.length)return Db(a,fb);var b=fb;var c=[],d;for(d in a)b(a,d)&&c.push(String(d));return c},oc=Fa.v4,gb={_data:{},length:0,setItem:function(a,b){this._data[a]=b;this.length=Ga(this._data).length;return b},getItem:function(a){return a in this._data?this._data[a]:null},removeItem:function(a){a in this._data&&delete this._data[a];this.length=Ga(this._data).length;return null},clear:function(){this._data=
{};this.length=0},key:function(a){return Ga(this._data)[a]}};var pc=function(){try{if(!window.localStorage)return!1;var a=oc();window.localStorage.setItem(a,"test_value");var b=window.localStorage.getItem(a);window.localStorage.removeItem(a);return"test_value"===b}catch(c){return!1}}()?window.localStorage:gb;var Eb=Object.prototype.toString,qc="function"===typeof Array.isArray?Array.isArray:function(a){return"[object Array]"===Eb.call(a)},rc=function(a,b){for(var c=0;c<b.length&&!1!==a(b[c],c,b);c+=
1);},sc=function(a,b){for(var c=Ga(b),d=0;d<c.length&&!1!==a(b[c[d]],c[d],b);d+=1);},sa=function(a,b){var c;if((c=null!=b)&&!(c=qc(b))&&(c="function"!==b)){c=b.length;var d=typeof c;c="number"===d||"object"===d&&"[object Number]"===Eb.call(c)}return(c?rc:sc).call(this,a,b)},Ib=da(function(a,b){(function(){function c(m,q){function F(n,w){try{n()}catch(t){w&&w()}}function D(n){if(null!=D[n])return D[n];if("bug-string-char-index"==n)var w=!1;else if("json"==n)w=D("json-stringify")&&D("date-serialization")&&
D("json-parse");else if("date-serialization"==n){if(w=D("json-stringify")&&ea){var t=q.stringify;F(function(){w='"-271821-04-20T00:00:00.000Z"'==t(new S(-864E13))&&'"+275760-09-13T00:00:00.000Z"'==t(new S(864E13))&&'"-000001-01-01T00:00:00.000Z"'==t(new S(-621987552E5))&&'"1969-12-31T23:59:59.999Z"'==t(new S(-1))})}}else{var y;if("json-stringify"==n){t=q.stringify;var A="function"==typeof t;A&&((y=function(){return 1}).toJSON=y,F(function(){A="0"===t(0)&&"0"===t(new O)&&'""'==t(new x)&&t(X)===Z&&
t(Z)===Z&&t()===Z&&"1"===t(y)&&"[1]"==t([y])&&"[null]"==t([Z])&&"null"==t(null)&&"[null,null,null]"==t([Z,X,null])&&'{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==t({a:[y,!0,!1,null,"\x00\b\n\f\r\t"]})&&"1"===t(null,y)&&"[\n 1,\n 2\n]"==t([1,2],null,1)},function(){A=!1}));w=A}if("json-parse"==n){var H=q.parse,r;"function"==typeof H&&F(function(){0===H("0")&&!H(!1)&&(y=H('{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'),r=5==y.a.length&&1===y.a[0])&&(F(function(){r=!H('"\t"')}),r&&F(function(){r=
1!==H("01")}),r&&F(function(){r=1!==H("1.")}))},function(){r=!1});w=r}}return D[n]=!!w}m||(m=g.Object());q||(q=g.Object());var O=m.Number||g.Number,x=m.String||g.String,ca=m.Object||g.Object,S=m.Date||g.Date,Ea=m.SyntaxError||g.SyntaxError,ja=m.TypeError||g.TypeError,ka=m.Math||g.Math;m=m.JSON||g.JSON;"object"==typeof m&&m&&(q.stringify=m.stringify,q.parse=m.parse);ca=ca.prototype;var X=ca.toString,ra=ca.hasOwnProperty,Z,ea=new S(-0xc782b5b800cec);F(function(){ea=-109252==ea.getUTCFullYear()&&0===
ea.getUTCMonth()&&1===ea.getUTCDate()&&10==ea.getUTCHours()&&37==ea.getUTCMinutes()&&6==ea.getUTCSeconds()&&708==ea.getUTCMilliseconds()});D["bug-string-char-index"]=D["date-serialization"]=D.json=D["json-stringify"]=D["json-parse"]=null;if(!D("json")){var hb=D("bug-string-char-index"),wa=function(n,w){var t=0,y,A;(y=function(){this.valueOf=0}).prototype.valueOf=0;var H=new y;for(A in H)ra.call(H,A)&&t++;y=H=null;t?wa=function(r,B){var P="[object Function]"==X.call(r),G,N;for(G in r)P&&"prototype"==
G||!ra.call(r,G)||(N="constructor"===G)||B(G);(N||ra.call(r,G="constructor"))&&B(G)}:(H="valueOf toString toLocaleString propertyIsEnumerable isPrototypeOf hasOwnProperty constructor".split(" "),wa=function(r,B){var P="[object Function]"==X.call(r),G,N=!P&&"function"!=typeof r.constructor&&d[typeof r.hasOwnProperty]&&r.hasOwnProperty||ra;for(G in r)P&&"prototype"==G||!N.call(r,G)||B(G);for(P=H.length;G=H[--P];)N.call(r,G)&&B(G)});return wa(n,w)};if(!D("json-stringify")&&!D("date-serialization")){var tc=
{92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},fa=function(n,w){return("000000"+(w||0)).slice(-n)},Ma=function(n){var w,t,y,A,H,r,B,P;if(ea)var G=function(K){w=K.getUTCFullYear();t=K.getUTCMonth();y=K.getUTCDate();H=K.getUTCHours();r=K.getUTCMinutes();B=K.getUTCSeconds();P=K.getUTCMilliseconds()};else{var N=ka.floor,La=[0,31,59,90,120,151,181,212,243,273,304,334],ma=function(K,la){return La[la]+365*(K-1970)+N((K-1969+(la=+(1<la)))/4)-N((K-1901+la)/100)+N((K-1601+la)/400)};G=function(K){y=
N(K/864E5);for(w=N(y/365.2425)+1970-1;ma(w+1,0)<=y;w++);for(t=N((y-ma(w,0))/30.42);ma(w,t+1)<=y;t++);y=1+y-ma(w,t);A=(K%864E5+864E5)%864E5;H=N(A/36E5)%24;r=N(A/6E4)%60;B=N(A/1E3)%60;P=A%1E3}}Ma=function(K){K>-1/0&&K<1/0?(G(K),K=(0>=w||1E4<=w?(0>w?"-":"+")+fa(6,0>w?-w:w):fa(4,w))+"-"+fa(2,t+1)+"-"+fa(2,y)+"T"+fa(2,H)+":"+fa(2,r)+":"+fa(2,B)+"."+fa(3,P)+"Z",w=t=y=H=r=B=P=null):K=null;return K};return Ma(n)};if(D("json-stringify")&&!D("date-serialization")){var uc=function(n){return Ma(this)},vc=q.stringify;
q.stringify=function(n,w,t){var y=S.prototype.toJSON;S.prototype.toJSON=uc;n=vc(n,w,t);S.prototype.toJSON=y;return n}}else{var wc=function(n){n=n.charCodeAt(0);var w=tc[n];return w?w:"\\u00"+fa(2,n.toString(16))},ib=/[\x00-\x1f\x22\x5c]/g,Fb=function(n){ib.lastIndex=0;return'"'+(ib.test(n)?n.replace(ib,wc):n)+'"'},jb=function(n,w,t,y,A,H,r){var B,P;F(function(){B=w[n]});"object"==typeof B&&B&&(B.getUTCFullYear&&"[object Date]"==X.call(B)&&B.toJSON===S.prototype.toJSON?B=Ma(B):"function"==typeof B.toJSON&&
(B=B.toJSON(n)));t&&(B=t.call(w,n,B));if(B==Z)return B===Z?B:"null";var G=typeof B;"object"==G&&(P=X.call(B));switch(P||G){case "boolean":case "[object Boolean]":return""+B;case "number":case "[object Number]":return B>-1/0&&B<1/0?""+B:"null";case "string":case "[object String]":return Fb(""+B)}if("object"==typeof B){for(G=r.length;G--;)if(r[G]===B)throw ja();r.push(B);var N=[];var La=H;H+=A;if("[object Array]"==P){var ma=0;for(G=B.length;ma<G;ma++)P=jb(ma,B,t,y,A,H,r),N.push(P===Z?"null":P);G=N.length?
A?"[\n"+H+N.join(",\n"+H)+"\n"+La+"]":"["+N.join(",")+"]":"[]"}else wa(y||B,function(K){var la=jb(K,B,t,y,A,H,r);la!==Z&&N.push(Fb(K)+":"+(A?" ":"")+la)}),G=N.length?A?"{\n"+H+N.join(",\n"+H)+"\n"+La+"}":"{"+N.join(",")+"}":"{}";r.pop();return G}};q.stringify=function(n,w,t){var y;if(d[typeof w]&&w){var A=X.call(w);if("[object Function]"==A)var H=w;else if("[object Array]"==A){var r={};for(var B=0,P=w.length,G;B<P;)if(G=w[B++],A=X.call(G),"[object String]"==A||"[object Number]"==A)r[G]=1}}if(t)if(A=
X.call(t),"[object Number]"==A){if(0<(t-=t%1))for(10<t&&(t=10),y="";y.length<t;)y+=" "}else"[object String]"==A&&(y=10>=t.length?t:t.slice(0,10));return jb("",(G={},G[""]=n,G),H,r,y,"",[])}}}if(!D("json-parse")){var xc=x.fromCharCode,yc={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},z,Na,T=function(){z=Na=null;throw Ea();},na=function(){for(var n=Na,w=n.length,t,y,A,H,r;z<w;)switch(r=n.charCodeAt(z),r){case 9:case 10:case 13:case 32:z++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=
hb?n.charAt(z):n[z],z++,t;case 34:t="@";for(z++;z<w;)if(r=n.charCodeAt(z),32>r)T();else if(92==r)switch(r=n.charCodeAt(++z),r){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=yc[r];z++;break;case 117:y=++z;for(A=z+4;z<A;z++)r=n.charCodeAt(z),48<=r&&57>=r||97<=r&&102>=r||65<=r&&70>=r||T();t+=xc("0x"+n.slice(y,z));break;default:T()}else{if(34==r)break;r=n.charCodeAt(z);for(y=z;32<=r&&92!=r&&34!=r;)r=n.charCodeAt(++z);t+=n.slice(y,z)}if(34==n.charCodeAt(z))return z++,t;T();default:y=
z;45==r&&(H=!0,r=n.charCodeAt(++z));if(48<=r&&57>=r){for(48==r&&(r=n.charCodeAt(z+1),48<=r&&57>=r)&&T();z<w&&(r=n.charCodeAt(z),48<=r&&57>=r);z++);if(46==n.charCodeAt(z)){for(A=++z;A<w&&!(r=n.charCodeAt(A),48>r||57<r);A++);A==z&&T();z=A}r=n.charCodeAt(z);if(101==r||69==r){r=n.charCodeAt(++z);43!=r&&45!=r||z++;for(A=z;A<w&&!(r=n.charCodeAt(A),48>r||57<r);A++);A==z&&T();z=A}return+n.slice(y,z)}H&&T();t=n.slice(z,z+4);if("true"==t)return z+=4,!0;if("fals"==t&&101==n.charCodeAt(z+4))return z+=5,!1;if("null"==
t)return z+=4,null;T()}return"$"},kb=function(n){var w;"$"==n&&T();if("string"==typeof n){if("@"==(hb?n.charAt(0):n[0]))return n.slice(1);if("["==n){for(w=[];;){n=na();if("]"==n)break;if(t)","==n?(n=na(),"]"==n&&T()):T();else var t=!0;","==n&&T();w.push(kb(n))}return w}if("{"==n){for(w={};;){n=na();if("}"==n)break;t?","==n?(n=na(),"}"==n&&T()):T():t=!0;","!=n&&"string"==typeof n&&"@"==(hb?n.charAt(0):n[0])&&":"==na()||T();w[n.slice(1)]=kb(na())}return w}T()}return n},Hb=function(n,w,t){t=Gb(n,w,t);
t===Z?delete n[w]:n[w]=t},Gb=function(n,w,t){var y=n[w],A;if("object"==typeof y&&y)if("[object Array]"==X.call(y))for(A=y.length;A--;)Hb(X,wa,y,A,t);else wa(y,function(H){Hb(y,H,t)});return t.call(n,w,y)};q.parse=function(n,w){var t;z=0;Na=""+n;n=kb(na());"$"!=na()&&T();z=Na=null;return w&&"[object Function]"==X.call(w)?Gb((t={},t[""]=n,t),"",w):n}}}q.runInContext=c;return q}var d={"function":!0,object:!0},f=d.object&&b&&!b.nodeType&&b,g=d[typeof window]&&window||this,h=f&&d.object&&a&&!a.nodeType&&
"object"==typeof bb&&bb;!h||h.global!==h&&h.window!==h&&h.self!==h||(g=h);if(f)c(g,f);else{var l=g.JSON,p=g.JSON3,u=!1,v=c(g,g.JSON3={noConflict:function(){u||(u=!0,g.JSON=l,g.JSON3=p,l=p=null);return v}});g.JSON={parse:v.parse,stringify:v.stringify}}}).call(bb)}),Tb=pc;aa.prototype.set=function(a,b){var c=this._createValidKey(a);if(c)try{this.engine.setItem(c,Ib.stringify(b))}catch(d){c=!1;if(d.code)switch(d.code){case 22:c=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===d.name&&(c=!0)}else-2147024882===
d.number&&(c=!0);c&&(this._swapEngine(),this.set(a,b))}};aa.prototype.get=function(a){try{var b=this.engine.getItem(this._createValidKey(a));return null===b?null:Ib.parse(b)}catch(c){return null}};aa.prototype.getOriginalEngine=function(){return this.originalEngine};aa.prototype.remove=function(a){this.engine.removeItem(this._createValidKey(a))};aa.prototype._createValidKey=function(a){var b=this.name,c=this.id;if(!Ga(this.keys).length)return[b,c,a].join(".");var d;sa(function(f){f===a&&(d=[b,c,a].join("."))},
this.keys);return d};aa.prototype._swapEngine=function(){var a=this;sa(function(b){var c=a.get(b);gb.setItem([a.name,a.id,b].join("."),c);a.remove(b)},this.keys);this.engine=gb};var Wa=aa,Jb={setTimeout:function(a,b){return window.setTimeout(a,b)},clearTimeout:function(a){return window.clearTimeout(a)},Date:"undefined"!==typeof window?window.Date:Date},xa=Jb;ia.prototype.now=function(){return+new xa.Date};ia.prototype.run=function(a,b){var c=this.nextId++;this.tasks[c]=xa.setTimeout(this._handle(c,
a),b);return c};ia.prototype.cancel=function(a){this.tasks[a]&&(xa.clearTimeout(this.tasks[a]),delete this.tasks[a])};ia.prototype.cancelAll=function(){sa(xa.clearTimeout,this.tasks);this.tasks={}};ia.prototype._handle=function(a,b){var c=this;return function(){delete c.tasks[a];return b()}};ia.setClock=function(a){xa=a};ia.resetClock=function(){xa=Jb};var Ub=ia;R.names=[];R.skips=[];R.enable=function(a){try{localStorage.debug=a}catch(f){}for(var b=(a||"").split(/[\s,]+/),c=b.length,d=0;d<c;d++)a=
b[d].replace("*",".*?"),"-"===a[0]?R.skips.push(new RegExp("^"+a.substr(1)+"$")):R.names.push(new RegExp("^"+a+"$"))};R.disable=function(){R.enable("")};R.humanize=function(a){return 36E5<=a?(a/36E5).toFixed(1)+"h":6E4<=a?(a/6E4).toFixed(1)+"m":1E3<=a?(a/1E3|0)+"s":a+"ms"};R.enabled=function(a){for(var b=0,c=R.skips.length;b<c;b++)if(R.skips[b].test(a))return!1;b=0;for(c=R.names.length;b<c;b++)if(R.names[b].test(a))return!0;return!1};try{window.localStorage&&R.enable(localStorage.debug)}catch(a){}var zc=
da(function(a){function b(c){if(c){for(var d in b.prototype)c[d]=b.prototype[d];return c}}a.exports=b;b.prototype.on=b.prototype.addEventListener=function(c,d){this._callbacks=this._callbacks||{};(this._callbacks["$"+c]=this._callbacks["$"+c]||[]).push(d);return this};b.prototype.once=function(c,d){function f(){this.off(c,f);d.apply(this,arguments)}f.fn=d;this.on(c,f);return this};b.prototype.off=b.prototype.removeListener=b.prototype.removeAllListeners=b.prototype.removeEventListener=function(c,
d){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var f=this._callbacks["$"+c];if(!f)return this;if(1==arguments.length)return delete this._callbacks["$"+c],this;for(var g,h=0;h<f.length;h++)if(g=f[h],g===d||g.fn===d){f.splice(h,1);break}return this};b.prototype.emit=function(c){this._callbacks=this._callbacks||{};var d=[].slice.call(arguments,1),f=this._callbacks["$"+c];if(f){f=f.slice(0);for(var g=0,h=f.length;g<h;++g)f[g].apply(this,d)}return this};b.prototype.listeners=
function(c){this._callbacks=this._callbacks||{};return this._callbacks["$"+c]||[]};b.prototype.hasListeners=function(c){return!!this.listeners(c).length}}),rb=Fa.v4,Ac=R("localstorage-retry");zc(ba.prototype);ba.prototype.start=function(){this._running&&this.stop();this._running=!0;this._ack();this._checkReclaim();this._processHead()};ba.prototype.stop=function(){this._schedule.cancelAll();this._running=!1};ba.prototype.shouldRetry=function(a,b){return b>this.maxAttempts?!1:!0};ba.prototype.getDelay=
function(a){a=this.backoff.MIN_RETRY_DELAY*Math.pow(this.backoff.FACTOR,a);if(this.backoff.JITTER){var b=Math.random(),c=Math.floor(b*this.backoff.JITTER*a);a=5>Math.floor(10*b)?a-c:a+c}return Number(Math.min(a,this.backoff.MAX_RETRY_DELAY).toPrecision(1))};ba.prototype.addItem=function(a){this._enqueue({item:a,attemptNumber:0,time:this._schedule.now()})};ba.prototype.requeue=function(a,b,c){this.shouldRetry(a,b,c)?this._enqueue({item:a,attemptNumber:b,time:this._schedule.now()+this.getDelay(b)}):
this.emit("discard",a,b)};ba.prototype._enqueue=function(a){var b=this._store.get(this.keys.QUEUE)||[];b=b.slice(-(this.maxItems-1));b.push(a);b=b.sort(function(c,d){return c.time-d.time});this._store.set(this.keys.QUEUE,b);this._running&&this._processHead()};ba.prototype._processHead=function(){function a(v,m){h.push({item:v.item,done:function(q,F){var D=c.get(b.keys.IN_PROGRESS)||{};delete D[m];c.set(b.keys.IN_PROGRESS,D);b.emit("processed",q,F,v.item);q&&b.requeue(v.item,v.attemptNumber+1,q)}})}
var b=this,c=this._store;this._schedule.cancel(this._processId);for(var d=c.get(this.keys.QUEUE)||[],f=c.get(this.keys.IN_PROGRESS)||{},g=this._schedule.now(),h=[],l=Object.keys(f).length;d.length&&d[0].time<=g&&l++<b.maxItems;){var p=d.shift(),u=rb();f[u]={item:p.item,attemptNumber:p.attemptNumber,time:b._schedule.now()};a(p,u)}c.set(this.keys.QUEUE,d);c.set(this.keys.IN_PROGRESS,f);sa(function(v){try{b.fn(v.item,v.done)}catch(m){Ac("Process function threw error: "+m)}},h);d=c.get(this.keys.QUEUE)||
[];this._schedule.cancel(this._processId);0<d.length&&(this._processId=this._schedule.run(this._processHead,d[0].time-g))};ba.prototype._ack=function(){this._store.set(this.keys.ACK,this._schedule.now());this._store.set(this.keys.RECLAIM_START,null);this._store.set(this.keys.RECLAIM_END,null);this._schedule.run(this._ack,this.timeouts.ACK_TIMER)};ba.prototype._checkReclaim=function(){function a(c){c.set(b.keys.RECLAIM_START,b.id);c.set(b.keys.ACK,b._schedule.now());b._schedule.run(function(){c.get(b.keys.RECLAIM_START)===
b.id&&(c.set(b.keys.RECLAIM_END,b.id),b._schedule.run(function(){c.get(b.keys.RECLAIM_END)===b.id&&c.get(b.keys.RECLAIM_START)===b.id&&b._reclaim(c.id)},b.timeouts.RECLAIM_WAIT))},b.timeouts.RECLAIM_WAIT)}var b=this;sa(function(c){c.id!==b.id&&(b._schedule.now()-c.get(b.keys.ACK)<b.timeouts.RECLAIM_TIMEOUT||a(c))},function(c){for(var d=[],f=b._store.getOriginalEngine(),g=0;g<f.length;g++){var h=f.key(g).split(".");3===h.length&&h[0]===c&&"ack"===h[2]&&d.push(new Wa(c,h[1],b.keys))}return d}(this.name));
this._schedule.run(this._checkReclaim,this.timeouts.RECLAIM_TIMER)};ba.prototype._reclaim=function(a){var b=this;a=new Wa(this.name,a,this.keys);var c=this._store.get(this.keys.QUEUE)||[],d=a.get(this.keys.IN_PROGRESS)||{},f=a.get(this.keys.QUEUE)||[];sa(function(g){c.push({item:g.item,attemptNumber:g.attemptNumber,time:b._schedule.now()})},f);sa(function(g){c.push({item:g.item,attemptNumber:g.attemptNumber+1,time:b._schedule.now()})},d);c=c.sort(function(g,h){return g.time-h.time});this._store.set(this.keys.QUEUE,
c);a.remove(this.keys.IN_PROGRESS);a.remove(this.keys.QUEUE);a.remove(this.keys.RECLAIM_START);a.remove(this.keys.RECLAIM_END);a.remove(this.keys.ACK);this._processHead()};var oa=!1,ta=!1;if("undefined"===typeof window){var Kb={hostname:""};var I={navigator:{userAgent:""},document:{location:Kb,referrer:""},screen:{width:0,height:0},location:Kb}}else I=window;var Oa=Array.prototype,Lb=Object.prototype,ya=Oa.slice,Ha=Lb.toString,Pa=Lb.hasOwnProperty,Y=I.console,za=I.navigator,J=I.document,Ia=I.opera,
Qa=I.screen,Q=za.userAgent,lb=Function.prototype.bind,Mb=Oa.map,Nb=Oa.forEach,Ob=Oa.indexOf,Bc=Array.isArray,mb={},Pb=/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i,e={trim:function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},nb=function(){this.events=[]};nb.prototype.logEvent=function(a,b){var c=[];e.each(b,function(d){try{var f=JSON.stringify(d)}catch(g){f=String(d)}c.push(f)});b=c.join(" ");this.events.push({timestamp:(new Date).getTime(),level:a,url:window.location.href,message:b})};
nb.prototype.getLogLines=function(){var a=[];e.each(this.events,function(b){a.push(b.timestamp+":"+b.level+":"+b.url+" 0:0 "+b.message)});return a};var Ra=new nb,C={log:function(){ta&&Ra.logEvent("INFO",arguments);if(oa&&!e.isUndefined(Y)&&Y)try{Y.log.apply(Y,arguments)}catch(a){e.each(arguments,function(b){Y.log(b)})}},error:function(){if(ta||oa&&!e.isUndefined(Y)&&Y){var a=["Freshpaint error:"].concat(e.toArray(arguments));if(ta)Ra.logEvent("SEVERE",a);else try{Y.error.apply(Y,a)}catch(b){e.each(a,
function(c){Y.error(c)})}}},critical:function(){if(ta||!e.isUndefined(Y)&&Y){var a=["Freshpaint error:"].concat(e.toArray(arguments));if(ta)Ra.logEvent("SEVERE",a);else try{Y.error.apply(Y,a)}catch(b){e.each(a,function(c){Y.error(c)})}}}};e.bind=function(a,b){var c;if(lb&&a.bind===lb)return lb.apply(a,ya.call(arguments,1));if(!e.isFunction(a))throw new TypeError;var d=ya.call(arguments,2);return c=function(){if(!(this instanceof c))return a.apply(b,d.concat(ya.call(arguments)));var f={};f.prototype=
a.prototype;var g=new f;f.prototype=null;f=a.apply(g,d.concat(ya.call(arguments)));return Object(f)===f?f:g}};e.bind_instance_methods=function(a){for(var b in a)"function"===typeof a[b]&&(a[b]=e.bind(a[b],a))};e.each=function(a,b,c){if(null!==a&&void 0!==a)if(Nb&&a.forEach===Nb)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,f=a.length;d<f&&!(d in a&&b.call(c,a[d],d,a)===mb);d++);else for(d in a)if(Pa.call(a,d)&&b.call(c,a[d],d,a)===mb)break};e.escapeHTML=function(a){a&&e.isString(a)&&(a=
a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"));return a};e.extend=function(a){e.each(ya.call(arguments,1),function(b){for(var c in b)void 0!==b[c]&&(a[c]=b[c])});return a};e.isArray=Bc||function(a){return"[object Array]"===Ha.call(a)};e.isFunction=function(a){try{return/^\s*\bfunction\b/.test(a)}catch(b){return!1}};e.isArguments=function(a){return!(!a||!Pa.call(a,"callee"))};e.toArray=function(a){return a?a.toArray?a.toArray():e.isArray(a)||
e.isArguments(a)?ya.call(a):e.values(a):[]};e.keys=function(a){var b=[];if(null===a)return b;e.each(a,function(c,d){b[b.length]=d});return b};e.values=function(a){var b=[];if(null===a)return b;e.each(a,function(c){b[b.length]=c});return b};e.identity=function(a){return a};e.include=function(a,b){var c=!1;if(null===a)return c;if(Ob&&a.indexOf===Ob)return-1!=a.indexOf(b);e.each(a,function(d){if(c||(c=d===b))return mb});return c};e.includes=function(a,b){return-1!==a.indexOf(b)};e.inherit=function(a,
b){a.prototype=new b;a.prototype.constructor=a;a.superclass=b.prototype;return a};e.isObject=function(a){return a===Object(a)&&!e.isArray(a)};e.isEmptyObject=function(a){if(e.isObject(a)){for(var b in a)if(Pa.call(a,b))return!1;return!0}return!1};e.isUndefined=function(a){return void 0===a};e.isString=function(a){return"[object String]"==Ha.call(a)};e.isDate=function(a){return"[object Date]"==Ha.call(a)};e.isNumber=function(a){return"[object Number]"==Ha.call(a)};e.isElement=function(a){return!(!a||
1!==a.nodeType)};e.encodeDates=function(a){e.each(a,function(b,c){e.isDate(b)?a[c]=e.formatDate(b):e.isObject(b)&&(a[c]=e.encodeDates(b))});return a};e.timestamp=function(){Date.now=Date.now||function(){return+new Date};return Date.now()};e.formatDate=function(a){function b(c){return 10>c?"0"+c:c}return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())};e.safewrap=function(a){return function(){try{return a.apply(this,
arguments)}catch(b){C.critical("Implementation error. Please turn on debug and contact support@fresphaint.io."),oa&&C.critical(b)}}};e.safewrap_class=function(a,b){for(var c=0;c<b.length;c++)a.prototype[b[c]]=e.safewrap(a.prototype[b[c]])};e.safewrap_instance_methods=function(a){for(var b in a)"function"===typeof a[b]&&(a[b]=e.safewrap(a[b]))};e.strip_empty_properties=function(a){var b={};e.each(a,function(c,d){e.isString(c)&&0<c.length&&(b[d]=c)});return b};e.truncate=function(a,b){if("string"===
typeof a)var c=a.slice(0,b);else e.isArray(a)?(c=[],e.each(a,function(d){c.push(e.truncate(d,b))})):e.isObject(a)?(c={},e.each(a,function(d,f){c[f]=e.truncate(d,b)})):c=a;return c};e.JSONEncode=function(){return function(a){var b=function(d){var f=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};f.lastIndex=0;return f.test(d)?'"'+d.replace(f,function(h){var l=
g[h];return"string"===typeof l?l:"\\u"+("0000"+h.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+d+'"'},c=function(d,f){var g="";var h="";var l=g;(f=f[d])&&"object"===typeof f&&"function"===typeof f.toJSON&&(f=f.toJSON(d));switch(typeof f){case "string":return b(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);case "object":if(!f)return"null";g+="    ";d=[];if("[object Array]"===Ha.apply(f)){var p=f.length;for(h=0;h<p;h+=1)d[h]=c(h,f)||"null";return p=
0===d.length?"[]":g?"[\n"+g+d.join(",\n"+g)+"\n"+l+"]":"["+d.join(",")+"]"}for(h in f)Pa.call(f,h)&&(p=c(h,f))&&d.push(b(h)+(g?": ":":")+p);return p=0===d.length?"{}":g?"{"+d.join(",")+l+"}":"{"+d.join(",")+"}"}};return c("",{"":a})}}();e.JSONDecode=function(){var a,b,c={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},d,f=function(m){m=new SyntaxError(m);m.at=a;m.text=d;throw m;},g=function(m){m&&m!==b&&f("Expected '"+m+"' instead of '"+b+"'");b=d.charAt(a);a+=1;return b},h=function(){var m=
"";"-"===b&&(m="-",g("-"));for(;"0"<=b&&"9">=b;)m+=b,g();if("."===b)for(m+=".";g()&&"0"<=b&&"9">=b;)m+=b;if("e"===b||"E"===b){m+=b;g();if("-"===b||"+"===b)m+=b,g();for(;"0"<=b&&"9">=b;)m+=b,g()}m=+m;if(isFinite(m))return m;f("Bad number")},l=function(){var m,q="",F;if('"'===b)for(;g();){if('"'===b)return g(),q;if("\\"===b)if(g(),"u"===b){for(m=F=0;4>m;m+=1){var D=parseInt(g(),16);if(!isFinite(D))break;F=16*F+D}q+=String.fromCharCode(F)}else if("string"===typeof c[b])q+=c[b];else break;else q+=b}f("Bad string")},
p=function(){for(;b&&" ">=b;)g()},u=function(){switch(b){case "t":return g("t"),g("r"),g("u"),g("e"),!0;case "f":return g("f"),g("a"),g("l"),g("s"),g("e"),!1;case "n":return g("n"),g("u"),g("l"),g("l"),null}f('Unexpected "'+b+'"')};var v=function(){p();switch(b){case "{":a:{var m={};if("{"===b){g("{");p();if("}"===b){g("}");var q=m;break a}for(;b;){q=l();p();g(":");Object.hasOwnProperty.call(m,q)&&f('Duplicate key "'+q+'"');m[q]=v();p();if("}"===b){g("}");q=m;break a}g(",");p()}}f("Bad object");q=
void 0}return q;case "[":a:{q=[];if("["===b){g("[");p();if("]"===b){g("]");break a}for(;b;){q.push(v());p();if("]"===b){g("]");break a}g(",");p()}}f("Bad array");q=void 0}return q;case '"':return l();case "-":return h();default:return"0"<=b&&"9">=b?h():u()}};return function(m){d=m;a=0;b=" ";m=v();p();b&&f("Syntax error");return m}}();e.base64Encode=function(a){var b=0,c=0,d=[];if(!a)return a;a=e.utf8Encode(a);do{var f=a.charCodeAt(b++);var g=a.charCodeAt(b++);var h=a.charCodeAt(b++);var l=f<<16|g<<
8|h;f=l>>18&63;g=l>>12&63;h=l>>6&63;l&=63;d[c++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(l)}while(b<a.length);b=d.join("");switch(a.length%3){case 1:b=b.slice(0,-2)+"==";break;case 2:b=b.slice(0,-1)+"="}return b};e.utf8Encode=function(a){a=
(a+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var b="",c,d;var f=c=0;var g=a.length;for(d=0;d<g;d++){var h=a.charCodeAt(d),l=null;128>h?c++:l=127<h&&2048>h?String.fromCharCode(h>>6|192,h&63|128):String.fromCharCode(h>>12|224,h>>6&63|128,h&63|128);null!==l&&(c>f&&(b+=a.substring(f,c)),b+=l,f=c=d+1)}c>f&&(b+=a.substring(f,a.length));return b};e.UUID=function(){var a=function(){for(var c=1*new Date,d=0;c==1*new Date;)d++;return c.toString(16)+d.toString(16)},b=function(){function c(l,p){var u,v=0;
for(u=0;u<p.length;u++)v|=f[u]<<8*u;return l^v}var d,f=[],g=0;for(d=0;d<Q.length;d++){var h=Q.charCodeAt(d);f.unshift(h&255);4<=f.length&&(g=c(g,f),f=[])}0<f.length&&(g=c(g,f));return g.toString(16)};return function(){var c=(Qa.height*Qa.width).toString(16);return a()+"-"+Math.random().toString(16).replace(".","")+"-"+b()+"-"+c+"-"+a()}}();e.isBlockedUA=function(a){return/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(a)?!0:!1};e.HTTPBuildQuery=function(a,b){var c,
d,f=[];e.isUndefined(b)&&(b="&");e.each(a,function(g,h){c=encodeURIComponent(g.toString());d=encodeURIComponent(h);f[f.length]=d+"="+c});return f.join(b)};e.getQueryParam=function(a,b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+b+"=([^&#]*)")).exec(a);return null===a||a&&"string"!==typeof a[1]&&a[1].length?"":decodeURIComponent(a[1]).replace(/\+/g," ")};e.getHashParam=function(a,b){return(a=a.match(new RegExp(b+"=([^&]*)")))?a[1]:null};e.cloneObject=function(a){if(null===
a||"object"!==typeof a)return a;if(e.isArray(a)){var b=[];a.forEach(function(f){b.push(e.cloneObject(f))});return b}var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[d]=e.cloneObject(a[d]));return c};e.lookupIterator=function(a){return e.isFunction(a)?a:function(b){return b[a]}};e.pluck=function(a,b){return e.map(a,function(c){return c[b]})};e.map=e.collect=function(a,b,c){var d=[];if(null==a)return d;if(Mb&&a.map===Mb)return a.map(b,c);e.each(a,function(f,g,h){d.push(b.call(c,f,g,h))});return d};e.sortBy=
function(a,b,c){var d=e.lookupIterator(b);return e.pluck(e.map(a,function(f,g,h){return{value:f,index:g,criteria:d.call(c,f,g,h)}}).sort(function(f,g){var h=f.criteria,l=g.criteria;if(h!==l){if(h>l||void 0===h)return 1;if(h<l||void 0===l)return-1}return f.index-g.index}),"value")};e.cookie={get:function(a){a+="=";for(var b=J.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(a))return decodeURIComponent(d.substring(a.length,d.length))}return null},
parse:function(a){try{var b=e.JSONDecode(e.cookie.get(a))||{}}catch(c){}return b},set_seconds:function(a,b,c,d,f){var g="",h="",l="";d&&(g=(g=(g=J.location.hostname.match(Pb))?g[0]:"")?"; domain=."+g:"");c&&(h=new Date,h.setTime(h.getTime()+1E3*c),h="; expires="+h.toGMTString());f&&(l="; secure");J.cookie=a+"="+encodeURIComponent(b)+h+"; path=/"+g+l},set:function(a,b,c,d,f){var g="",h="",l="";d&&(g=(g=(g=J.location.hostname.match(Pb))?g[0]:"")?"; domain=."+g:"");c&&(h=new Date,h.setTime(h.getTime()+
864E5*c),h="; expires="+h.toGMTString());f&&(l="; secure");a=a+"="+encodeURIComponent(b)+h+"; path=/"+g+l;return J.cookie=a},remove:function(a,b){e.cookie.set(a,"",-1,b)}};var ob=null;e.localStorage={is_supported:function(){if(null!==ob)return ob;var a=!0;try{e.localStorage.set("__mplssupport__","xyz"),"xyz"!==e.localStorage.get("__mplssupport__")&&(a=!1),e.localStorage.remove("__mplssupport__")}catch(b){a=!1}a||C.error("localStorage unsupported; falling back to cookie store");return ob=a},error:function(a){C.error("localStorage error: "+
a)},get:function(a){try{return window.localStorage.getItem(a)}catch(b){e.localStorage.error(b)}return null},parse:function(a){try{return e.JSONDecode(e.localStorage.get(a))||{}}catch(b){}return null},set:function(a,b){try{window.localStorage.setItem(a,b)}catch(c){e.localStorage.error(c)}},remove:function(a){try{window.localStorage.removeItem(a)}catch(b){e.localStorage.error(b)}}};e.register_event=function(){function a(c,d,f){return function(g){if(g=g||b(window.event)){var h=!0,l;e.isFunction(f)&&
(l=f(g));g=d.call(c,g);if(!1===l||!1===g)h=!1;return h}}}function b(c){c&&(c.preventDefault=b.preventDefault,c.stopPropagation=b.stopPropagation);return c}b.preventDefault=function(){this.returnValue=!1};b.stopPropagation=function(){this.cancelBubble=!0};return function(c,d,f,g,h){c?c.addEventListener&&!g?c.addEventListener(d,f,!!h):(d="on"+d,c[d]=a(c,f,c[d])):C.error("No valid element provided to register_event")}}();var Cc=/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/;e.dom_query=function(){function a(f){return f.all?
f.all:f.getElementsByTagName("*")}function b(f,g){g=" "+g+" ";return 0<=(" "+f.className+" ").replace(d," ").indexOf(g)}function c(f){if(!J.getElementsByTagName)return[];f=f.split(" ");var g,h,l,p,u=[J];for(h=0;h<f.length;h++){var v=f[h].replace(/^\s+/,"").replace(/\s+$/,"");if(-1<v.indexOf("#")){var m=v.split("#");v=m[0];u=J.getElementById(m[1]);if(!u||v&&u.nodeName.toLowerCase()!=v)return[];u=[u]}else if(-1<v.indexOf(".")){m=v.split(".");v=m[0];var q=m[1];v||(v="*");m=[];for(l=g=0;l<u.length;l++){var F=
"*"==v?a(u[l]):u[l].getElementsByTagName(v);for(p=0;p<F.length;p++)m[g++]=F[p]}u=[];for(l=v=0;l<m.length;l++)m[l].className&&e.isString(m[l].className)&&b(m[l],q)&&(u[v++]=m[l])}else if(m=v.match(Cc)){v=m[1];var D=m[2];q=m[3];var O=m[4];v||(v="*");m=[];for(l=g=0;l<u.length;l++)for(F="*"==v?a(u[l]):u[l].getElementsByTagName(v),p=0;p<F.length;p++)m[g++]=F[p];u=[];v=0;switch(q){case "=":q=function(x){return x.getAttribute(D)==O};break;case "~":q=function(x){return x.getAttribute(D).match(new RegExp("\\b"+
O+"\\b"))};break;case "|":q=function(x){return x.getAttribute(D).match(new RegExp("^"+O+"-?"))};break;case "^":q=function(x){return 0===x.getAttribute(D).indexOf(O)};break;case "$":q=function(x){return x.getAttribute(D).lastIndexOf(O)==x.getAttribute(D).length-O.length};break;case "*":q=function(x){return-1<x.getAttribute(D).indexOf(O)};break;default:q=function(x){return x.getAttribute(D)}}u=[];for(l=v=0;l<m.length;l++)q(m[l])&&(u[v++]=m[l])}else{m=[];for(l=g=0;l<u.length;l++)for(F=u[l].getElementsByTagName(v),
p=0;p<F.length;p++)m[g++]=F[p];u=m}}return u}var d=/[\t\r\n]/g;return function(f){return e.isElement(f)?[f]:e.isObject(f)&&!e.isUndefined(f.length)?f:c.call(this,f)}}();e.info={campaign_keywords:["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],campaignParams:function(){var a="",b={};e.each(this.campaign_keywords,function(c){a=e.getQueryParam(J.URL,c);a.length&&(b[c]=a)});return b},searchEngine:function(a){return 0===a.search("https?://(.*)google.([^/?]*)")?"google":0===a.search("https?://(.*)bing.com")?
"bing":0===a.search("https?://(.*)yahoo.com")?"yahoo":0===a.search("https?://(.*)duckduckgo.com")?"duckduckgo":null},searchInfo:function(a){var b=e.info.searchEngine(a),c={};null!==b&&(c.$search_engine=b,a=e.getQueryParam(a,"yahoo"!=b?"q":"p"),a.length&&(c.mp_keyword=a));return c},browser:function(a,b,c){b=b||"";return c||e.includes(a," OPR/")?e.includes(a,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(a)?"BlackBerry":e.includes(a,"IEMobile")||e.includes(a,"WPDesktop")?"Internet Explorer Mobile":
e.includes(a,"Edge")?"Microsoft Edge":e.includes(a,"FBIOS")?"Facebook Mobile":e.includes(a,"Chrome")?"Chrome":e.includes(a,"CriOS")?"Chrome iOS":e.includes(a,"UCWEB")||e.includes(a,"UCBrowser")?"UC Browser":e.includes(a,"FxiOS")?"Firefox iOS":e.includes(b,"Apple")?e.includes(a,"Mobile")?"Mobile Safari":"Safari":e.includes(a,"Android")?"Android Mobile":e.includes(a,"Konqueror")?"Konqueror":e.includes(a,"Firefox")?"Firefox":e.includes(a,"MSIE")||e.includes(a,"Trident/")?"Internet Explorer":e.includes(a,
"Gecko")?"Mozilla":""},browserVersion:function(a,b,c){b={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,
"Android Mobile":/android\s(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[e.info.browser(a,b,c)];return void 0===b?null:(a=a.match(b))?parseFloat(a[a.length-2]):null},os:function(){return/Windows/i.test(Q)?/Phone/.test(Q)||/WPDesktop/.test(Q)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(Q)?"iOS":/Android/.test(Q)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(Q)?"BlackBerry":/Mac/i.test(Q)?"Mac OS X":/Linux/.test(Q)?"Linux":/CrOS/.test(Q)?"Chrome OS":
""},device:function(a){return/Windows Phone/i.test(a)||/WPDesktop/.test(a)?"Windows Phone":/iPad/.test(a)?"iPad":/iPod/.test(a)?"iPod Touch":/iPhone/.test(a)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(a)?"BlackBerry":/Android/.test(a)?"Android":""},referringDomain:function(a){a=a.split("/");return 3<=a.length?a[2]:""},properties:function(){return e.extend(e.strip_empty_properties({$os:e.info.os(),$browser:e.info.browser(Q,za.vendor,Ia),$referrer:J.referrer,$referring_domain:e.info.referringDomain(J.referrer),
$device:e.info.device(Q),$title:J.title}),{$host:window.location.host,$pathname:I.location.pathname,$current_url:I.location.href,$browser_version:e.info.browserVersion(Q,za.vendor,Ia),$screen_height:Qa.height,$screen_width:Qa.width,mp_lib:"web",$lib_version:"1.3.0",$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),time:e.timestamp()/1E3})},people_properties:function(){return e.extend(e.strip_empty_properties({$os:e.info.os(),$browser:e.info.browser(Q,
za.vendor,Ia)}),{$browser_version:e.info.browserVersion(Q,za.vendor,Ia)})},pageviewInfo:function(a){return e.strip_empty_properties({mp_page:a,mp_referrer:J.referrer,mp_browser:e.info.browser(Q,za.vendor,Ia),mp_platform:e.info.os()})}};e.toArray=e.toArray;e.isObject=e.isObject;e.JSONEncode=e.JSONEncode;e.JSONDecode=e.JSONDecode;e.isBlockedUA=e.isBlockedUA;e.isEmptyObject=e.isEmptyObject;e.info=e.info;e.info.device=e.info.device;e.info.browser=e.info.browser;e.info.properties=e.info.properties;var pa=
{_initializedTokens:[],_previousElementSibling:function(a){if(a.previousElementSibling)return a.previousElementSibling;do a=a.previousSibling;while(a&&(!a||1!==a.nodeType));return a},_loadScript:function(a,b){var c=document.createElement("script");c.type="text/javascript";c.src=a;c.onload=b;a=document.getElementsByTagName("script");0<a.length?a[0].parentNode.insertBefore(c,a[0]):document.body.appendChild(c)},_getPropertiesFromElement:function(a,b){var c={attr__class:Ja(b),tag_name:b.tagName.toLowerCase(),
attr__id:b.id};"5a690268-f2da-4301-ab9f-c8f5284ba3f2"===a.get_config("token")&&b.attributes["data-testid"]&&(c["attr__data-testid"]=b.attributes["data-testid"].value);({"108c1db4-c74b-45bc-91f7-b8421bce7a07":!0,"10990a3d-da0b-4f29-a2cd-2d6861767cc6":!0,"15d95e6b-60d2-4203-80f2-42131397de15":!0,"18505fed-178a-4a94-b97c-eeeed7bc80a4":!0,"258da091-52c6-4a05-a332-5e6607df42cb":!0,"29563612-1f51-4f19-8bd4-b0ff10423c19":!0,"3e5f0bb6-2970-4de0-b9cc-79735040dfc5":!0,"5a16aa72-fb64-4006-a3be-7cce5aefc69a":!0,
"6396e738-10fe-4c36-9278-7beb15d03984":!0,"6cdf86ab-e124-4479-9b25-d37fafbfe3df":!0,"82260f08-cd00-4476-ba6f-023dfa05df7d":!0,"b24263ba-9733-456e-b763-6c8e9ef08218":!0,"cbf6d4a6-145b-4dc4-8ac1-9f72e4f6290d":!0,"ce231951-67be-4d6d-819c-fb97a5709bb4":!0,"e9932d9e-008d-42eb-aaf1-abc5e0e33a70":!0,"f67b439d-60b9-433f-9837-5bab2d0621bb":!0,"00000000-1234-1234-1234-000000000000":!0})[a.get_config("token")]&&b.attributes["data-inputid"]&&(c["attr__data-inputid"]=b.attributes["data-inputid"].value);try{sb(b)&&
e.each(b.attributes,function(h){a._elementAttributesWhitelist[h.name]&&Ca(h.value)&&(c["attr__"+h.name]=h.value)})}catch(h){C.error("Error collecting attributes. Continuing anyway.",h)}for(var d=1,f=1,g=b;g=this._previousElementSibling(g);)d++,g.tagName===b.tagName&&f++;c.nth_child=d;c.nth_of_type=f;return c},_getDefaultProperties:function(a){return{$event_type:a,$ce_version:1}},_extractCustomPropertyValue:function(a){var b=[];e.each(document.querySelectorAll(a.value),function(c){var d;-1<["input",
"select"].indexOf(c.tagName.toLowerCase())?d="checkbox"===c.getAttribute("type")?c.checked:c.value:c.textContent&&(d=c.textContent);Ca(d)&&b.push(d)});return b.join(", ")},_getCustomProperties:function(a){var b={};e.each(this._customProperties,function(c){e.each(c.event_selectors,function(d){d=document.querySelectorAll(d);e.each(d,function(f){e.includes(a,f)&&Ba(f)&&(b[c.name]=this._extractCustomPropertyValue(c))},this)},this)},this);return b},_getEventTarget:function(a){return a.composedPath&&"function"===
typeof a.composedPath?a.composedPath()[0]:"undefined"===typeof a.target?a.srcElement:a.target},_trackEvent:function(a,b){var c=this._getEventTarget(a);c&&3===c.nodeType&&(c=c.parentNode);if(Zb(c,a)){var d=$b(c),f=[],g,h=!1;e.each(d,function(v){var m=Ba(v);qa(v,"a")&&(g=v.getAttribute("href"),g=m&&Ca(g)&&g);m=Ja(v).split(" ");e.includes(m,"fp-no-track")&&(h=!0);f.push(this._getPropertiesFromElement(b,v))},this);if(h)return!1;var l,p=Vb(c);p&&p.length&&!b.get_config("disable_target_text_capture")&&
(l=p);var u;(c=Wb(c))&&c.length&&!b.get_config("disable_target_text_capture")&&(u=c);d=e.extend({},this._getDefaultProperties(a.type),{$elements:f,$el_attr__href:g,$el_text:l,$el_nested_text:u},this._getCustomProperties(d));b._processEvent("$web_event",a,{},d);return!0}},_navigate:function(a){window.location.href=a},_interceptFunction:function(a,b,c){var d=a[b];a[b]=function(){var f=d.apply(a,arguments);c();return f}},_addDomEventHandlers:function(a){var b=e.bind(function(d){d=d||window.event;this._trackEvent(d,
a)},this);e.register_event(document,"submit",b,!1,!0);e.register_event(document,"change",b,!1,!0);e.register_event(document,"click",b,!1,!0);if(window.history.pushState){var c=this;b=function(){c._prevPageviewPath!==window.location.pathname&&(a.triggerCodeEval("onPageChange"),c._triggerPageview(a))};this._interceptFunction(window.history,"pushState",b);this._interceptFunction(window.history,"replaceState",b);window.addEventListener("popstate",b,!0)}},_customProperties:{},init:function(a){var b=this;
if(document&&document.body){a.__initialized=!0;var c=a.get_config("token");-1<this._initializedTokens.indexOf(c)?C.log('autotrack already initialized for token "'+c+'"'):(this._initializedTokens.push(c),this._maybeLoadEditor(a)||(a.triggerCodeEval("onPageLoad"),a.triggerCodeEval("onPageChange"),this._triggerPageview(a),this._addDomEventHandlers(a)))}else C.log("document not ready yet, trying again in 500 milliseconds..."),setTimeout(function(){b.init(a)},500)},_prevPageviewPath:null,_triggerPageview:function(a){this._prevPageviewPath=
window.location.pathname;a.register({$pageview_id:e.UUID()});var b=e.extend({},{$title:document.title},this._getDefaultProperties("pageview"));a._processEvent("$web_event",null,{},b)},_editorParamsFromHash:function(a,b){try{var c=e.getHashParam(b,"fpState");c=JSON.parse(decodeURIComponent(c));var d={temporaryToken:c.temporaryToken,projectToken:c.projectToken};c.userEmail&&(d.userEmail=c.userEmail);window.sessionStorage.setItem("fpEditorParams",JSON.stringify(d));c.desiredHash?window.location.hash=
c.desiredHash:window.history?history.replaceState("",document.title,window.location.pathname+window.location.search):window.location.hash=""}catch(f){C.error("Unable to parse data from hash",f)}return d},_maybeLoadEditor:function(a){try{var b=!1;if(e.getHashParam(window.location.hash,"fpState")){var c=e.getHashParam(window.location.hash,"fpState");c=JSON.parse(decodeURIComponent(c));b="fpeditor"===c.action}var d=!!window.sessionStorage.getItem("_fpcehash");if(b)var f=this._editorParamsFromHash(a,
window.location.hash);else d?(f=this._editorParamsFromHash(a,window.sessionStorage.getItem("_fpcehash")),window.sessionStorage.removeItem("_fpcehash")):f=JSON.parse(window.sessionStorage.getItem("fpEditorParams")||"{}");return f.projectToken&&a.get_config("token")===f.projectToken?(this._loadEditor(a,f),!0):!1}catch(g){return!1}},_loadEditor:function(a,b){return window._fpEditorLoaded?!1:(window._fpEditorLoaded=!0,a=window.__FP_EDITOR_PATH__||a.get_config("app_host")+"/static/js/editor.js",this._loadScript(a,
function(){window.fp_load_editor(b)}),!0)},enabledForProject:function(a,b,c){b=e.isUndefined(b)?10:b;c=e.isUndefined(c)?10:c;for(var d=0,f=0;f<a.length;f++)d+=a.charCodeAt(f);return d%b<c},isBrowserSupported:function(){return e.isFunction(document.querySelectorAll)}};e.bind_instance_methods(pa);e.safewrap_instance_methods(pa);var L=function(){};e.extend(L.prototype,{set_action:function(a,b){var c={},d={};e.isObject(a)?e.each(a,function(f,g){this._is_reserved_property(g)||(d[g]=f)},this):d[a]=b;c.$set=
d;return c},unset_action:function(a){var b={},c=[];e.isArray(a)||(a=[a]);e.each(a,function(d){this._is_reserved_property(d)||c.push(d)},this);b.$unset=c;return b},set_once_action:function(a,b){var c={},d={};e.isObject(a)?e.each(a,function(f,g){this._is_reserved_property(g)||(d[g]=f)},this):d[a]=b;c.$set_once=d;return c},union_action:function(a,b){var c={},d={};e.isObject(a)?e.each(a,function(f,g){this._is_reserved_property(g)||(d[g]=e.isArray(f)?f:[f])},this):d[a]=e.isArray(b)?b:[b];c.$union=d;return c},
append_action:function(a,b){var c={},d={};e.isObject(a)?e.each(a,function(f,g){this._is_reserved_property(g)||(d[g]=f)},this):d[a]=b;c.$append=d;return c},remove_action:function(a,b){var c={},d={};e.isObject(a)?e.each(a,function(f,g){this._is_reserved_property(g)||(d[g]=f)},this):d[a]=b;c.$remove=d;return c},delete_action:function(){return{$delete:""}}});L.prototype._init=function(a,b,c){this._freshpaint=a;this._group_key=b;this._group_id=c};L.prototype.set=ua(function(a,b,c){var d=this.set_action(a,
b);e.isObject(a)&&(c=b);return this._send_request(d,c)});L.prototype.set_once=ua(function(a,b,c){var d=this.set_once_action(a,b);e.isObject(a)&&(c=b);return this._send_request(d,c)});L.prototype.unset=ua(function(a,b){a=this.unset_action(a);return this._send_request(a,b)});L.prototype.union=ua(function(a,b,c){e.isObject(a)&&(c=b);a=this.union_action(a,b);return this._send_request(a,c)});L.prototype["delete"]=ua(function(a){var b=this.delete_action();return this._send_request(b,a)});L.prototype.remove=
ua(function(a,b,c){a=this.remove_action(a,b);return this._send_request(a,c)});L.prototype._send_request=function(a,b){a.$group_key=this._group_key;a.$group_id=this._group_id;a.$token=this._get_config("token");var c=e.encodeDates(a),d=e.truncate(c,255);c=e.JSONEncode(c);c=e.base64Encode(c);C.log(a);this._freshpaint._send_request(this._freshpaint.get_config("api_host")+"/groups/",{data:c},this._freshpaint._prepare_callback(b,d));return d};L.prototype._is_reserved_property=function(a){return"$group_key"===
a||"$group_id"===a};L.prototype._get_config=function(a){return this._freshpaint.get_config(a)};L.prototype.toString=function(){return this._freshpaint.toString()+".group."+this._group_key+"."+this._group_id};L.prototype.remove=L.prototype.remove;L.prototype.set=L.prototype.set;L.prototype.set_once=L.prototype.set_once;L.prototype.union=L.prototype.union;L.prototype.unset=L.prototype.unset;L.prototype.toString=L.prototype.toString;var Za={Number:"number",Boolean:"boolean",String:"string"};Da.prototype.shouldApply=
function(a,b){return(null===this.set.eventDefId||this.set.eventDefId===a)&&(null===this.set.destinationName||this.set.destinationName===b)};Da.prototype.operandValueString=function(){return null===this.transformation.operandValue||"string"!==typeof this.transformation.operandValue?(C.error("Transformation does not have an operand value"),null):String(this.transformation.operandValue)};Da.prototype.checkNonNilTargetValue=function(){if(null===this.transformation.targetValue)throw Error("Target value is null");
};Da.prototype.transform=function(a,b,c){if("replaceName"===this.transformation.operation){c=this.operandValueString();if(null===c)throw Error("Missing operand on replaceName transformation");return[c,b]}if("replacePropertyKey"===this.transformation.operation){c=this.operandValueString();if(null===c)throw Error("Missing operand on replaceName transformation");this.checkNonNilTargetValue();b=e.cloneObject(b);b.hasOwnProperty(this.transformation.targetValue)&&(b[c]=b[this.transformation.targetValue],
delete b[this.transformation.targetValue]);return[a,b]}if("castPropertyValue"===this.transformation.operation){c=this.operandValueString();if(null===c)throw Error("Missing operand on replaceName transformation");this.checkNonNilTargetValue();c=b.hasOwnProperty(this.transformation.targetValue);if(!c)return[a,b];c=gc(b[this.transformation.targetValue],this.transformation.operandValue);b=e.cloneObject(b);b[this.transformation.targetValue]=c;return[a,b]}if("lowercasePropertyValue"===this.transformation.operation||
"uppercasePropertyValue"===this.transformation.operation){c=b.hasOwnProperty(this.transformation.targetValue);if(!c||"string"!==typeof b[this.transformation.targetValue])return[a,b];b=e.cloneObject(b);b[this.transformation.targetValue]="uppercasePropertyValue"===this.transformation.operation?b[this.transformation.targetValue].toUpperCase():b[this.transformation.targetValue].toLowerCase();return[a,b]}if("deleteProperty"===this.transformation.operation)return b=e.cloneObject(b),b.hasOwnProperty(this.transformation.targetValue)&&
delete b[this.transformation.targetValue],[a,b];if("sendBuiltinProperty"===this.transformation.operation){var d=this.transformation.targetValue,f=this.operandValueString();b=e.cloneObject(b);c="target_text"===d?c.$el_nested_text||c.$el_text:c[d];null!==c&&void 0!==c&&(b[f]=c);return[a,b]}if("sendConstantProperty"===this.transformation.operation){if(this.transformation.targetValue)try{f=JSON.parse(this.transformation.targetValue)}catch(g){return C.error("Unable to parse transformation targetValue - ",
g.message),[a,b]}b=e.cloneObject(b);c=this.operandValueString();b[c]=f;return[a,b]}};V.prototype.transform=function(a,b,c,d,f){var g=a.name,h;e.each(this.transformers,function(l){if((!d||"replaceName"!==l.transformation.operation)&&l.shouldApply(a.id,b))try{h=l.transform(g,c,f),g=h[0],c=h[1]}catch(p){C.error(p.message)}});return[g,c]};V.prototype.getLegacyMapping=function(a){var b=[];e.each(this.transformers,function(c){null!==c.set.destinationName&&c.set.destinationName!==a||!c.set.eventDefId||"replaceName"===
c.transformation.operation&&b.push({destEvent:c.transformation.operandValue,fpEvent:c.set.eventDefId})});return b};V.prototype.getLegacyMappingToSelf=function(a){var b={};e.each(this.transformers,function(c){null!==c.set.destinationId&&c.set.destinationId!==a||"replaceName"!==c.transformation.operation||(b[c.transformation.operandValue]=c.transformation.operandValue)});return b};V.nil=new V([]);V.fromTransformationSets=function(a){try{for(var b=[],c=[],d=0;d<a.length;d++)b.push(new fc(a[d]));for(a=
0;a<b.length;a++){var f=b[a];for(d=0;d<f.transformations.length;d++)c.push(new Da(f.transformations[d],f))}return new V(c)}catch(g){return C.error("Error creating transformer",g),V.nil}};var yb=function(a,b,c,d,f,g){this.name=a;this.id=b;this.filter=c;this.enabledDestinations=d;this.snapshots=f;this.segmentCompatible=g};yb.prototype.matches=function(a,b){return this.filter.matches(a,b)};var ab=function(a,b,c,d){this.propName=a;this.opName=b;this.val=c;this.negate=d};ab.prototype.matchesMainFilter=
function(a,b){b=b[this.propName];return"="===this.opName?b===this.val:"contains"===this.opName?b.includes(this.val):"css_matches"===this.opName?null!==a.target.closest(this.val):"wildcard_matches"===this.opName?RegExp("^"+this.val.split("*").map(hc).join(".*")+"$").test(b):!1};ab.prototype.matches=function(a,b){a=this.matchesMainFilter(a,b);return this.negate?!a:a};var $a=function(a){this.filters=a};$a.prototype.matches=function(a,b){for(var c=0;c<this.filters.length;c++)if(!this.filters[c].matches(a,
b))return!1;return!0};try{jc()}catch(a){console.log("GOT ERROR WHILE POLYFILLING",a)}var pb,M,Dc="__mps __mpso __mpus __mpa __mpap __mpr __mpu __alias __cmpns __timers __user_props __group_id __group_props __last_event_time __initial_utm_props_set".split(" "),Sa=I.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,Qb=!Sa&&-1===Q.indexOf("MSIE")&&-1===Q.indexOf("Mozilla"),Rb={api_host:"https://api.perfalytics.com",app_host:"https://perfalytics.com",autotrack:!0,cdn:"https://perfalytics.com",tag_manager:!0,
cross_subdomain_cookie:!0,persistence:"cookie",persistence_name:"",cookie_name:"",loaded:function(){},store_google:!0,save_referrer:!0,test:!1,verbose:!1,img:!1,track_pageview:!0,debug:I.__FP_FORCE_DEBUG__||!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_persistence:!1,disable_cookie:!1,disable_target_text_capture:!1,secure_cookie:!1,ip:!0,opt_out_tracking_by_default:!1,opt_out_persistence_by_default:!1,opt_out_tracking_persistence_type:"localStorage",opt_out_tracking_cookie_prefix:null,
property_blacklist:[],xhr_headers:{},inapp_protocol:"//",inapp_link_new_window:!1},Sb=!1,ha=function(){};ha.prototype.create_properties=function(){};ha.prototype.event_handler=function(){};ha.prototype.after_track_handler=function(){};ha.prototype.init=function(a){this.mp=a;return this};ha.prototype.track=function(a,b,c,d){var f=this,g=e.dom_query(a);if(0===g.length)C.error("The DOM query ("+a+") returned 0 elements");else return e.each(g,function(h){e.register_event(h,this.override_event,function(l){var p=
{},u=f.create_properties(c,this),v=f.mp.get_config("track_links_timeout");f.event_handler(l,this,p);I.setTimeout(f.track_callback(d,u,p,!0),v);f.mp.track(b,u,f.track_callback(d,u,p))})},this),!0};ha.prototype.track_callback=function(a,b,c,d){d=d||!1;var f=this;return function(){c.callback_fired||(c.callback_fired=!0,a&&!1===a(d,b)||f.after_track_handler(b,c,d))}};ha.prototype.create_properties=function(a,b){return"function"===typeof a?a(b):e.extend({},a)};var Aa=function(){this.override_event="click"};
e.inherit(Aa,ha);Aa.prototype.create_properties=function(a,b){var c=Aa.superclass.create_properties.apply(this,arguments);b.href&&(c.url=b.href);return c};Aa.prototype.event_handler=function(a,b,c){c.new_tab=2===a.which||a.metaKey||a.ctrlKey||"_blank"===b.target;c.href=b.href;c.new_tab||a.preventDefault()};Aa.prototype.after_track_handler=function(a,b){b.new_tab||setTimeout(function(){I.location=b.href},0)};var Ta=function(){this.override_event="submit"};e.inherit(Ta,ha);Ta.prototype.event_handler=
function(a,b,c){c.element=b;a.preventDefault()};Ta.prototype.after_track_handler=function(a,b){setTimeout(function(){b.element.submit()},0)};var E=function(a){this.props={};this.campaign_params_saved=!1;this.name=a.persistence_name?"mp_"+a.persistence_name:"mp_"+a.token+"_perfalytics";var b=a.persistence;"cookie"!==b&&"localStorage"!==b&&(C.critical("Unknown persistence type "+b+"; falling back to cookie"),b=a.persistence="cookie");"localStorage"===b&&e.localStorage.is_supported()?this.storage=e.localStorage:
this.storage=e.cookie;this.load();this.update_config(a);this.upgrade(a);this.save()};E.prototype.properties=function(){var a={};e.each(this.props,function(b,c){e.include(Dc,c)||(a[c]=b)});return a};E.prototype._customSuperProperties=function(){var a={},b="initial_utm_source initial_utm_medium initial_utm_campaign initial_utm_content initial_utm_term initial_utm_source utm_medium utm_campaign utm_content utm_term mp_keyword distinct_id mp_name_tag mp_page mp_referrer mp_browser mp_platform mp_lib".split(" ");
e.each(this.properties(),function(c,d){0<d.length&&"$"!==d[0]&&!e.include(b,d)&&(a[d]=c)});return a};E.prototype.load=function(){if(!this.disabled){var a=this.storage.parse(this.name);a&&(this.props=e.extend({},a))}};E.prototype.upgrade=function(a){var b=a.upgrade;if(b){var c="mp_super_properties";"string"===typeof b&&(c=b);b=this.storage.parse(c);this.storage.remove(c);this.storage.remove(c,!0);b&&(this.props=e.extend(this.props,b.all,b.events))}!a.cookie_name&&"freshpaint"!==a.name&&(c="mp_"+a.token+
"_"+a.name,b=this.storage.parse(c))&&(this.storage.remove(c),this.storage.remove(c,!0),this.register_once(b));this.storage===e.localStorage&&(b=e.cookie.parse(this.name),e.cookie.remove(this.name),e.cookie.remove(this.name,!0),b&&this.register_once(b))};E.prototype.save=function(){this.disabled||(this._expire_notification_campaigns(),this.storage.set(this.name,e.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure))};E.prototype.remove=function(){this.storage.remove(this.name,
!1);this.storage.remove(this.name,!0)};E.prototype.clear=function(){this.remove();this.props={}};E.prototype.register_once=function(a,b,c){return e.isObject(a)?("undefined"===typeof b&&(b="None"),this.expire_days="undefined"===typeof c?this.default_expiry:c,e.each(a,function(d,f){this.props.hasOwnProperty(f)&&this.props[f]!==b||(this.props[f]=d)},this),this.save(),!0):!1};E.prototype.register=function(a,b){return e.isObject(a)?(this.expire_days="undefined"===typeof b?this.default_expiry:b,e.extend(this.props,
a),this.save(),!0):!1};E.prototype.unregister=function(a){a in this.props&&(delete this.props[a],this.save())};E.prototype._expire_notification_campaigns=e.safewrap(function(){var a=this.props.__cmpns,b=oa?6E4:36E5;if(a){for(var c in a)1*new Date-a[c]>b&&delete a[c];e.isEmptyObject(a)&&delete this.props.__cmpns}});E.prototype._maybeStartNewSession=function(){var a=e.timestamp(),b={};b.__last_event_time=a;var c=this.props.__last_event_time;if(!c||c<a-18E5)b.$session_id=e.UUID();this.register(b);return!!b.$session_id};
E.prototype.update_campaign_params=function(){if(!this.props.__initial_utm_props_set){var a={__initial_utm_props_set:!0};e.each(e.info.campaignParams(),function(b,c){a["initial_"+c]=b});this.register_once(a)}e.each(e.info.campaign_keywords,function(b){this.unregister(b)},this);this.register(e.info.campaignParams())};E.prototype.update_search_keyword=function(a){this.register(e.info.searchInfo(a))};E.prototype.update_referrer_info=function(a){this.register_once({$initial_referrer:a||"$direct",$initial_referring_domain:e.info.referringDomain(a)||
"$direct"},"")};E.prototype.get_referrer_info=function(){return e.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})};E.prototype.safe_merge=function(a){e.each(this.props,function(b,c){c in a||(a[c]=b)});return a};E.prototype.update_config=function(a){this.default_expiry=this.expire_days=a.cookie_expiration;this.set_disabled(a.disable_persistence);this.set_cross_subdomain(a.cross_subdomain_cookie);this.set_secure(a.secure_cookie)};
E.prototype.set_disabled=function(a){(this.disabled=a)?this.remove():this.save()};E.prototype.set_cross_subdomain=function(a){a!==this.cross_subdomain&&(this.cross_subdomain=a,this.remove(),this.save())};E.prototype.get_cross_subdomain=function(){return this.cross_subdomain};E.prototype.set_secure=function(a){a!==this.secure&&(this.secure=a?!0:!1,this.remove(),this.save())};E.prototype._get_queue_key=function(a){if("$set"===a)return"__mps";if("$set_once"===a)return"__mpso";if("$unset"===a)return"__mpus";
if("$add"===a)return"__mpa";if("$append"===a)return"__mpap";if("$remove"===a)return"__mpr";if("$union"===a)return"__mpu";C.error("Invalid queue:",a)};E.prototype._get_queue=function(a){return this.props[this._get_queue_key(a)]};E.prototype._get_or_create_queue=function(a,b){a=this._get_queue_key(a);b=e.isUndefined(b)?{}:b;return this.props[a]||(this.props[a]=b)};E.prototype.set_event_timer=function(a,b){var c=this.props.__timers||{};c[a]=b;this.props.__timers=c;this.save()};E.prototype.remove_event_timer=
function(a){var b=(this.props.__timers||{})[a];e.isUndefined(b)||(delete this.props.__timers[a],this.save());return b};var k=function(){},Ua=function(a,b,c,d,f,g,h,l,p,u,v){var m=va(c)?M:M[c];if(m&&0===pb)var q=m;else{if(m&&!e.isArray(m)){C.error("You have already initialized "+c);return}q=new k}va(c)&&(I.freshpaint=I.perfalytics=q);q._cached_groups={};q._user_decide_check_complete=!1;q._events_tracked_before_user_decide_check_complete=[];q._eventDefs=d;q._transformer=g;q._configVersion=h;q._elementAttributesWhitelist=
l;q._codeEvalConfig=p;q._allowRetry=u;q._trackRequestType=v;q._pageviewProperties={};q._init(a,b,c);q._destInfo={};e.each(f,function(F){q._destInfo[F.name]=F});oa=I.__FP_FORCE_DEBUG__||oa||q.get_config("debug");if(ta=I.__FP_FORCE_TEST_MODE__||ta||q.get_config("test_mode"))I.__FP_TEST_MODE_LOGGER__=Ra;(a=e.isFunction(I.FPCookieBackedEventQueue))||e.isUndefined(m)||!e.isArray(m)||q._execute_array(m);if(a){a=new I.FPCookieBackedEventQueue;m=a.getEvents();a.deleteCookie();a=[];for(b=0;b<m.length;b++)f=
m[b],c=f.e,d=f.a,f=f.m,"page"===c&&f.l!==I.location.href||a.push([c].concat(d));q._execute_array(a)}q.__autotrack_enabled=q.get_config("autotrack");q.get_config("autotrack")&&(pa.enabledForProject(q.get_config("token"),100,100)?pa.isBrowserSupported()?pa.init(q):(q.__autotrack_enabled=!1,C.log("Disabling Automatic Event Collection because this browser is not supported")):(q.__autotrack_enabled=!1,C.log("Not in active bucket: disabling Automatic Event Collection.")));return q};k.prototype.init=function(a,
b,c){if(e.isUndefined(c))C.error("You must name your new library: init(token, config, name)");else if(va(c))C.error("You must initialize the main freshpaint object right after you include the Freshpaint js snippet");else return a=Ua(a,b,c,[],[],V.nil,0),M[c]=a,a._loaded(),a};k.prototype._init=function(a,b,c){var d=this;this.__loaded=!0;this.config={};this._triggered_notifs=[];this.set_config(e.extend({},Rb,b,{name:c,token:a,callback_fn:(va(c)?c:"freshpaint."+c)+"._jsc"}));this._jsc=function(){};this.__dom_loaded_queue=
[];this.__request_queue=[];this.__disabled_events=[];this._flags={disable_all_events:!1,identify_called:!1};this.persistence=this.cookie=new E(this.config);this._gdpr_init();a=e.UUID();this.get_distinct_id()||this.register_once({distinct_id:a,$device_id:a},"");this.destination_send_queues={fp:new ba("send_to_fp",{minRetryDelay:1E3,maxRetryDelay:3E4,backoffFactor:2,backoffJitter:0,maxItems:100,maxAttempts:10},function(f,g){d._process_queued_request(f,function(h,l){if(h)return g(h);g(null,l)})})};this.destination_send_queues.fp.start()};
k.prototype._loaded=function(){this.get_config("loaded")(this)};k.prototype._dom_loaded=function(){e.each(this.__dom_loaded_queue,function(a){this._track_dom.apply(this,a)},this);this.has_opted_out_tracking()||e.each(this.__request_queue,function(a){this._send_request.apply(this,a)},this);delete this.__dom_loaded_queue;delete this.__request_queue};k.prototype._track_dom=function(a,b){if(this.get_config("img"))return C.error("You can't use DOM tracking functions with img = true."),!1;if(!Sb)return this.__dom_loaded_queue.push([a,
b]),!1;a=(new a).init(this);return a.track.apply(a,b)};k.prototype._prepare_callback=function(a,b){if(e.isUndefined(a))return null;if(Sa)return function(g){a(g,b)};var c=this._jsc,d=""+Math.floor(1E8*Math.random()),f=this.get_config("callback_fn")+"["+d+"]";c[d]=function(g){delete c[d];a(g,b)};return f};k.prototype._send_request=k.prototype._enqueue_request=function(a,b,c,d){d=d||"GET";this._allowRetry?this.destination_send_queues.fp.addItem({url:a,data:b,callback:c,http_request_type:d}):this._send_request_from_url_data(a,
b,c,d)};k.prototype._process_queued_request=function(a,b){var c=a.callback;this._send_request_from_url_data(a.url,a.data,function(d){d instanceof Error?b(d):(c&&c(d),b())},a.http_request_type||"GET")};k.prototype._send_request_from_url_data=function(a,b,c,d){d=d||"GET";if(Qb)this.__request_queue.push(arguments);else{c||(c=function(){});var f=this.get_config("verbose");b.verbose&&(f=!0);this.get_config("test")&&(b.test=1);f&&(b.verbose=1);this.get_config("img")&&(b.img=1);if(!Sa)if(c)b.callback=c;
else if(f||this.get_config("test"))b.callback="(function(){})";"GET"===d&&(b={data:b.data});b.ip=this.get_config("ip")?1:0;b._=(new Date).getTime().toString();if("img"in b){var g=J.createElement("img");a+="?"+e.HTTPBuildQuery(b);g.src=a;J.body.appendChild(g);c()}else if(Sa)try{var h=new XMLHttpRequest;"GET"===d?(a+="?"+e.HTTPBuildQuery(b),h.open("GET",a,!0)):h.open("POST",a,!0);g=this.get_config("xhr_headers");if("POST"===d){g["Content-Type"]="application/json";try{b=JSON.parse(b.json_data)}catch(p){C.error(p)}}e.each(g,
function(p,u){h.setRequestHeader(u,p)});h.onreadystatechange=function(){if(4===h.readyState)if(200===h.status)if(f){try{var p=e.JSONDecode(h.responseText)}catch(u){return C.error(u),c(u)}c(p)}else c(Number(h.responseText));else p=Error("Bad HTTP status: "+h.status+" "+h.statusText),C.error(p),c(p)};"GET"===d?h.send(null):h.send(JSON.stringify(b))}catch(p){C.error(p),c(p)}else{g=J.createElement("script");g.type="text/javascript";g.async=!0;g.defer=!0;a+="?"+e.HTTPBuildQuery(b);g.src=a;var l=J.getElementsByTagName("script")[0];
l.parentNode.insertBefore(g,l);return c()}}};k.prototype._execute_array=function(a){var b,c=[],d=[],f=[],g=0;e.each(a,function(h){h&&(b=h[0],e.isArray(b)?f.push(h):"function"===typeof h?h.call(this):e.isArray(h)&&"alias"===b?c.push(h):e.isArray(h)&&"page"===b?0===g&&(f.push(h),g++):e.isArray(h)&&-1!==b.indexOf("track")&&"function"===typeof this[b]?f.push(h):d.push(h))},this);a=function(h,l){e.each(h,function(p){if(e.isArray(p[0])){var u=l;e.each(p,function(v){u=u[v[0]].apply(u,v.slice(1))})}else this[p[0]].apply(this,
p.slice(1))},l)};a(c,this);a(d,this);a(f,this)};k.prototype.push=function(a){this._execute_array([a])};k.prototype.disable=function(a){"undefined"===typeof a?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(a)};k.prototype._processEvent=function(a,b,c,d,f,g){this.persistence._maybeStartNewSession()&&this._sendEvent("$web_event",null,{},pa._getDefaultProperties("session"));this._sendEvent(a,b,c,d,f,g)};k.prototype._sendEvent=function(a,b,c,d,f,g){"undefined"===
typeof f&&(f={});"function"!==typeof g&&(g=function(){});if(this._event_is_disabled(a))g(0);else{c=e.extend({},this._pageviewProperties,c);d=e.extend({},d,{$event_name:a});d.token=this.get_config("token");var h=this.persistence.remove_event_timer(a);e.isUndefined(h)||(h=(new Date).getTime()-h,d.$duration=parseFloat((h/1E3).toFixed(3)));this.persistence.update_search_keyword(J.referrer);this.get_config("store_google")&&this.persistence.update_campaign_params();this.get_config("save_referrer")&&this.persistence.update_referrer_info(J.referrer);
d=e.extend({},e.info.properties(),this.persistence.properties(),d,{$options:f});h=this.get_config("property_blacklist");e.isArray(h)?e.each(h,function(l){delete d[l]}):C.error("Invalid value for property_blacklist config: "+h);h=this._find_matching_event_defs(a,b,d);b=this._get_snapshot_properties(h,b);c=e.extend({},c,this.persistence._customSuperProperties());this._send_event_to_destinations(a,h,c,b,f,d);f=e.extend({},d,c,{$eventDefProps:b});c=this._trackRequestType||"GET";a=e.truncate({event:a,
properties:f},255);f=e.JSONEncode(a);b=e.base64Encode(f);C.log("FRESHPAINT REQUEST:");C.log(a);this._enqueue_request(this.get_config("api_host")+"/track",{data:b,json_data:f},this._prepare_callback(g,a),c);return a}};k.prototype._find_matching_event_defs=function(a,b,c){a=[];if(this._eventDefs)for(var d=0;d<this._eventDefs.length;d++)try{var f=this._eventDefs[d];f.matches(b,c)&&a.push(f)}catch(g){}return a};k.prototype._get_snapshot_properties=function(a,b){b=void 0===b?{}:b;for(var c={},d=0;d<a.length;d++){for(var f=
a[d],g={},h=0;h<f.snapshots.length;h++){var l=f.snapshots[h];if("js_code"===l.type)try{var p=(new Function("event",l.value))(b);"SUPPRESS_EVENT"===p&&(g.$is_supressed=p);g[l.name]=p}catch(u){}else g[l.name]=pa._extractCustomPropertyValue(l)}c[f.id]=g}return c};k.prototype._isManuallyTrackedEvent=function(a){return 0===a.length||"$"!==a[0]};var qb=function(a,b){this.name=a;this.props=b};k.prototype._transformEventForDest=function(a,b,c){var d=a.name;this._destInfo&&this._destInfo[c]&&this._destInfo[c].settings&&
this._destInfo[c].mapping&&"Google AdWords New"!==c&&e.each(this._destInfo[c].mapping,function(f){var g=f.fpEvent;f=f.destEvent;g===a.id&&(C.log("Renaming event ",g," from ",a.name," to ",f," because it matches the standard event for ",c),d=f)});return new qb(d,b)};k.prototype._applyTransformer=function(a,b,c,d,f){c=this._transformer.transform(a,b,c,!!d,f);a=c[0];c=c[1];"Mixpanel"===b&&(c=e.extend({},c,{mp_lib:"Freshpaint: web",$source:"Freshpaint: web"}));return new qb(a,c)};k.prototype._getDestinationConfigFromName=
function(a){var b=null;e.each(this._destInfo,function(c,d){d===a&&(b=c)});return b};k.prototype._calculateDestinations=function(a,b,c){var d={};a=e.extend({integrations:{}},a);e.each(this._destInfo,function(f,g){c?a.integrations[g]?d[g]=a.integrations[g]:!1!==a.integrations.All&&!1!==a.integrations[g]&&(d[g]=!0):b[g]&&(d[g]=a.integrations[g]||b[g]||!0)});return d};k.prototype._send_event_to_destinations=function(a,b,c,d,f,g){var h=this,l=e.extend({integrations:{}},f);0===b.length&&this._isManuallyTrackedEvent(a)&&
(b=[{id:null,name:a,segmentCompatible:!0}]);for(a=0;a<b.length;a++)try{var p=b[a],u=d[p.id]||{};if(!("$is_supressed"in u)){u=e.extend({},c,u);this.triggerCodeEval("onTrack",{eventName:p.name,eventProperties:u,eventOptions:f,builtinProperties:g});var v=this._calculateDestinations(l,p.enabledDestinations,p.segmentCompatible);C.log("iterating over destinationsToSendTo",v);e.each(v,function(m,q){try{var F=l[q]||m;if(F){var D=h._makeIntegrationSettingsForSingleDestination(l,q,F),O=h._getDestinationConfigFromName(q);
if(3<=h._configVersion)if(O.useTransformer){C.log("Transforming event for ",O.name,p.name,u);var x=h._applyTransformer(p,O.name,u,O.skipTransformingEventNames,g);C.log("Transformed into",x)}else x=new qb(p.name,u);else x=h._transformEventForDest(p,u,q);h._callIntegrations("track",x.name,x.props,D)}}catch(ca){C.error("Error sending event to destination",q,ca)}})}}catch(m){}};k.prototype._makeIntegrationSettingsForSingleDestination=function(a,b,c){var d={All:!1};d[b]=c||!0;return e.extend({},a,{integrations:d})};
k.prototype._callIntegrations=function(){var a=I.freshpaintIntegrations;a.setAnonymousId(this.get_property("$device_id"));var b=arguments[0],c=Array.prototype.slice.call(arguments,1);return a[b].apply(a,c)};k.prototype.triggerCodeEval=function(a,b){var c=this.get_config("tag_manager");try{if(c&&this._codeEvalConfig){var d=this._codeEvalConfig[a];if(d){a=[];c=[];if("object"===typeof b)for(var f in b)b.hasOwnProperty(f)&&(a.push(f),c.push(b[f]));var g="(function ("+a.join(", ")+") {"+d+"})";C.log("eval code snippet: "+
g);var h=I.eval.call(I,g);h.apply(h,c)}}}catch(l){C.log("Code Eval:",l)}};k.prototype.track=function(a){return wb(a,function(b){return this.get_config(b)})}(function(a,b,c,d){"function"!==typeof d&&(d=function(){});if(e.isUndefined(a))C.error("No event name provided to freshpaint.track");else return this._processEvent(a,null,b,{},c,d)});k.prototype._create_map_key=function(a,b){return a+"_"+JSON.stringify(b)};k.prototype._remove_group_from_cache=function(a,b){delete this._cached_groups[this._create_map_key(a,
b)]};k.prototype.get_group=function(a,b){var c=this._create_map_key(a,b),d=this._cached_groups[c];if(void 0===d||d._group_key!==a||d._group_id!==b)d=new L,d._init(this,a,b),this._cached_groups[c]=d;return d};k.prototype.track_pageview=function(a){e.isUndefined(a)&&(a=J.location.href);this.track("mp_page_view",e.info.pageviewInfo(a))};k.prototype.track_links=function(){return this._track_dom.call(this,Aa,arguments)};k.prototype.track_forms=function(){return this._track_dom.call(this,Ta,arguments)};
k.prototype.time_event=function(a){e.isUndefined(a)?C.error("No event name provided to freshpaint.time_event"):this._event_is_disabled(a)||this.persistence.set_event_timer(a,(new Date).getTime())};k.prototype.register=function(a,b){this.persistence.register(a,b)};k.prototype.addPageviewProperties=function(a){this._pageviewProperties=e.extend({},this._pageviewProperties,a)};k.prototype.register_once=function(a,b,c){this.persistence.register_once(a,b,c)};k.prototype.unregister=function(a){this.persistence.unregister(a)};
k.prototype._register_single=function(a,b){var c={};c[a]=b;this.register(c)};k.prototype.identify=function(a,b,c,d){this.triggerCodeEval("onIdentify",{userID:a,userProps:b});e.isObject(a)&&(b=a,a=void 0);b="undefined"===typeof b?{}:b;var f=this.get_distinct_id();if(a===f||"undefined"===typeof a||!this._flags.identify_called){var g=this.get_property("__user_props")||{};b=e.extend({},g,b)}g={};g.__user_props=b;this.register(g);c=e.extend({},c,{anonymousId:this.get_property("$device_id")});"undefined"===
typeof a?(this.track("$identify",{$anon_distinct_id:f,$user_props:b},c),this._flags.identify_called?this._callIntegrations("identify",this.get_distinct_id(),b,c,d):this._callIntegrations("identify",b,c,d)):(this.register({$user_id:a}),this.get_property("$device_id")||this.register_once({$had_persisted_distinct_id:!0,$device_id:f},""),a!==f&&a!==this.get_property("__alias")&&(this.unregister("__alias"),this.register({distinct_id:a})),this._flags.identify_called=!0,this.track("$identify",{distinct_id:a,
$anon_distinct_id:f,$user_props:b},c),this._callIntegrations("identify",a,b,c,d))};k.prototype.alias=function(a,b,c,d){e.isObject(b)&&(c=b,b=this.get_distinct_id());this.track("$alias",{$alias_id:a,$previous_id:b},c);this._callIntegrations("alias",a,b,c,d)};k.prototype.page=function(a,b,c,d,f){"function"===typeof d&&(f=d,d=null);"function"===typeof c&&(f=c,d=c=null);"function"===typeof b&&(f=b,d=c=b=null);e.isObject(a)&&(d=b,c=a,b=a=null);e.isObject(b)&&(d=c,c=b,b=null);"string"===typeof a&&"string"!==
typeof b&&(b=a,a=null);this.track("$page",{$category:a,$name:b,$page_props:c},d);this._callIntegrations("page",a,b,c,d,f)};k.prototype.group=function(a,b,c,d){if(0===arguments.length)return this.group_object();e.isObject(a)&&(b=a,a=void 0);b="undefined"===typeof b?{}:b;var f=this.get_property("__group_id");if(a===f||"undefined"===typeof a||"undefined"===typeof f){var g=this.get_property("__group_props")||{};b=e.extend({},g,b)}g={};g.__group_props=b;this.register(g);"undefined"===typeof a?(this.track("$group",
{$group_id:f,$group_props:b},c),"undefined"!==typeof f?this._callIntegrations("group",f,b,c,d):this._callIntegrations("group",b,c,d)):(g={},g.__group_id=a,this.register(g),this.track("$group",{$group_id:a,$prev_group_id:f,$group_props:b},c),this._callIntegrations("group",a,b,c,d))};k.prototype.ready=function(a){this._callIntegrations("ready",a)};k.prototype.reset=function(){this.persistence.clear();this._flags.identify_called=!1;var a=e.UUID();this.register_once({distinct_id:a,$device_id:a},"");this._callIntegrations("reset")};
k.prototype.get_distinct_id=function(){return this.get_property("distinct_id")};k.prototype.alias=function(a,b){var c=this;e.isUndefined(b)&&(b=this.get_distinct_id());if(a!==b)return this._register_single("__alias",a),this.track("$create_alias",{alias:a,distinct_id:b},function(){c.identify(a)});C.error("alias matches current distinct_id - skipping api call.");this.identify(a);return-1};k.prototype.user=function(){var a=this;return{id:function(){return a.get_distinct_id()},traits:function(b){if(0===
arguments.length)return a.get_property("__user_props");var c={};c.__user_props=b;a.register(c);a._callIntegrations("user").traits(b);return null},anonymousId:function(){return a.get_property("$device_id")}}};k.prototype.group_object=function(){var a=this;return{id:function(){return a.get_property("__group_id")},traits:function(b){if(0===arguments.length)return a.get_property("__group_props");var c={};c.__group_props=b;a.register(c);a._callIntegrations("group").traits(b);return null}}};k.prototype.name_tag=
function(a){this._register_single("mp_name_tag",a)};k.prototype.set_config=function(a){e.isObject(a)&&(e.extend(this.config,a),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),oa=oa||this.get_config("debug"))};k.prototype.get_config=function(a){return this.config[a]};k.prototype.get_property=function(a){return this.persistence.props[a]};
k.prototype.toString=function(){var a=this.get_config("name");va(a)||(a="freshpaint."+a);return a};k.prototype._event_is_disabled=function(a){return e.isBlockedUA(Q)||this._flags.disable_all_events||e.include(this.__disabled_events,a)};k.prototype._gdpr_init=function(){"localStorage"===this.get_config("opt_out_tracking_persistence_type")&&e.localStorage.is_supported()&&(!this.has_opted_in_tracking()&&this.has_opted_in_tracking({persistence_type:"cookie"})&&this.opt_in_tracking({enable_persistence:!1}),
!this.has_opted_out_tracking()&&this.has_opted_out_tracking({persistence_type:"cookie"})&&this.opt_out_tracking({clear_persistence:!1}),this.clear_opt_in_out_tracking({persistence_type:"cookie",enable_persistence:!1}));this.has_opted_out_tracking()?this._gdpr_update_persistence({clear_persistence:!0}):this.has_opted_in_tracking()||!this.get_config("opt_out_tracking_by_default")&&!e.cookie.get("mp_optout")||(e.cookie.remove("mp_optout"),this.opt_out_tracking({clear_persistence:this.get_config("opt_out_persistence_by_default")}))};
k.prototype._gdpr_update_persistence=function(a){if(a&&a.clear_persistence)a=!0;else if(a&&a.enable_persistence)a=!1;else return;this.get_config("disable_persistence")||this.persistence.disabled===a||this.persistence.set_disabled(a)};k.prototype._gdpr_call_func=function(a,b){b=e.extend({track:e.bind(this.track,this),persistence_type:this.get_config("opt_out_tracking_persistence_type"),cookie_prefix:this.get_config("opt_out_tracking_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),
cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),secure_cookie:this.get_config("secure_cookie")},b);e.localStorage.is_supported()||(b.persistence_type="cookie");return a(this.get_config("token"),{track:b.track,trackEventName:b.track_event_name,trackProperties:b.track_properties,persistenceType:b.persistence_type,persistencePrefix:b.cookie_prefix,cookieExpiration:b.cookie_expiration,crossSubdomainCookie:b.cross_subdomain_cookie,secureCookie:b.secure_cookie})};k.prototype.opt_in_tracking=
function(a){a=e.extend({enable_persistence:!0},a);this._gdpr_call_func(ac,a);this._gdpr_update_persistence(a)};k.prototype.opt_out_tracking=function(a){a=e.extend({clear_persistence:!0,delete_user:!0},a);this._gdpr_call_func(bc,a);this._gdpr_update_persistence(a)};k.prototype.has_opted_in_tracking=function(a){return this._gdpr_call_func(cc,a)};k.prototype.has_opted_out_tracking=function(a){return this._gdpr_call_func(vb,a)};k.prototype.clear_opt_in_out_tracking=function(a){a=e.extend({enable_persistence:!0},
a);this._gdpr_call_func(dc,a);this._gdpr_update_persistence(a)};k.prototype.init=k.prototype.init;k.prototype.reset=k.prototype.reset;k.prototype.ready=k.prototype.ready;k.prototype.disable=k.prototype.disable;k.prototype.time_event=k.prototype.time_event;k.prototype.track=k.prototype.track;k.prototype.track_links=k.prototype.track_links;k.prototype.track_forms=k.prototype.track_forms;k.prototype.track_pageview=k.prototype.track_pageview;k.prototype.triggerCodeEval=k.prototype.triggerCodeEval;k.prototype.register=
k.prototype.register;k.prototype.register_once=k.prototype.register_once;k.prototype.unregister=k.prototype.unregister;k.prototype.addEventProperties=k.prototype.register;k.prototype.addInitialEventProperties=k.prototype.register_once;k.prototype.removeEventProperty=k.prototype.unregister;k.prototype.addPageviewProperties=k.prototype.addPageviewProperties;k.prototype.identify=k.prototype.identify;k.prototype.user=k.prototype.user;k.prototype.group=k.prototype.group;k.prototype.alias=k.prototype.alias;
k.prototype.page=k.prototype.page;k.prototype.name_tag=k.prototype.name_tag;k.prototype.set_config=k.prototype.set_config;k.prototype.get_config=k.prototype.get_config;k.prototype.get_property=k.prototype.get_property;k.prototype.get_distinct_id=k.prototype.get_distinct_id;k.prototype.toString=k.prototype.toString;k.prototype._processEvent=k.prototype._processEvent;k.prototype.opt_out_tracking=k.prototype.opt_out_tracking;k.prototype.opt_in_tracking=k.prototype.opt_in_tracking;k.prototype.has_opted_out_tracking=
k.prototype.has_opted_out_tracking;k.prototype.has_opted_in_tracking=k.prototype.has_opted_in_tracking;k.prototype.clear_opt_in_out_tracking=k.prototype.clear_opt_in_out_tracking;E.prototype.properties=E.prototype.properties;E.prototype.update_search_keyword=E.prototype.update_search_keyword;E.prototype.update_referrer_info=E.prototype.update_referrer_info;E.prototype.get_cross_subdomain=E.prototype.get_cross_subdomain;E.prototype.clear=E.prototype.clear;e.safewrap_class(k,["identify"]);var W={},
Ec=function(){e.each(W,function(a,b){va(b)||(M[b]=a)});M._=e},Fc=function(){M.init=function(a,b,c){if(c)return M[c]||(M[c]=W[c]=Ua(a,b,c,[],[],V.nil,0),M[c]._loaded()),M[c];c=M;W.freshpaint||W.perfalytics?(c=W.freshpaint||W.perfalytics,c.__SV=M.__SV):a&&(c=Ua(a,b,"freshpaint",[],[],V.nil,0),c._loaded(),W.freshpaint=c,W.perfalytics=c);M=c;1===pb&&(I.freshpaint=M,I.perfalytics=M);Ec()}},Gc=function(){function a(){a.done||(Sb=a.done=!0,Qb=!1,e.each(W,function(d){d._dom_loaded()}))}function b(){try{J.documentElement.doScroll("left")}catch(d){setTimeout(b,
1);return}a()}if(J.addEventListener)"complete"===J.readyState?a():J.addEventListener("DOMContentLoaded",a,!1);else if(J.attachEvent){J.attachEvent("onreadystatechange",a);var c=!1;try{c=null===I.frameElement}catch(d){}J.documentElement.doScroll&&c&&b()}e.register_event(I,"load",a,!0)};(function(){pb=1;M=I.freshpaint||I.perfalytics;if(e.isUndefined(M))C.critical('"freshpaint" object not initialized. Ensure you are using the latest version of the Freshpaint JS Library along with the snippet we provide.');
else if(M.__loaded||M.config&&M.persistence)C.error("Freshpaint library has already been downloaded at least once.");else{var a=M.__SV||0;if(1.1>a)C.critical("Version mismatch; please ensure you're using the latest version of the Freshpaint code snippet.");else{var b=M._i[0],c=b[0],d=e.extend({},Rb,b[1]||{});ic(d,c,function(f){pa._loadScript(d.app_host+"/static/js/integrations.js",function(){zb(c,function(){for(var g=f.destInfo,h=f.transformer,l=f.configVersion,p=f.elementAttributesWhitelist,u=f.codeEvalConfig,
v=f.allowRetry,m=f.trackRequestType,q={},F=0;F<g.length;F++){var D=g[F];q[D.name]=D.settings}I.freshpaintIntegrations.init(q,{user:{cookie:{key:"fpjs_user_id"},localStorage:{key:"fpjs_user_traits"}},group:{cookie:{key:"fpjs_group_id"},localStorage:{key:"fpjs_group_properties"}},integrations:d.integrations});var O=f.eventDefs;e.each(M._i,function(x){x&&e.isArray(x)&&(W[x[x.length-1]]=Ua.apply(this,x.concat([O,g,h,l,p,u,v,m])))});Fc();M.init();1.3>=a&&M.page();e.each(W,function(x){x._loaded()});W.freshpaint=
W.freshpaint||W.perfalytics;W.perfalytics=W.freshpaint;Gc()})})})}}})()})();
})();
